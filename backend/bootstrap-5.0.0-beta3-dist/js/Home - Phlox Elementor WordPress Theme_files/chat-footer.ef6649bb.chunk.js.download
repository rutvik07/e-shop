beaconJsonp([5],{1062:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(0),c=r(u),l=n(1),f=(r(l),n(11)),h=n(48),p=n(27),d=n(1063),y=r(d),g=n(835),v=r(g),m=n(795),b=r(m),_=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){var t=this.props,e=t.isChatEnded,n=t.messageBody,r=t.updateMessageBody,o=n.length||0,i={cursorPosition:o,value:n};return e?null:c.default.createElement(v.default,null,c.default.createElement(b.default,{externalStateUpdater:function(t){var e=t.value;return r(e)},initialHistory:i},c.default.createElement(y.default,null)))}}]),e}(u.Component);_.defaultProps={isChatEnded:!1,messageBody:"",updateMessageBody:function(){}};var w=function(t){return{messageBody:t.chat.messageBody,isChatEnded:(0,p.getChatIsEnded)(t)}},E={updateMessageBody:h.updateMessageBody};e.default=(0,f.connect)(w,E)(_)},1063:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.MessageInput=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(0),c=r(u),l=n(1),f=r(l),h=n(11),p=n(106),d=r(p),y=n(27),g=n(7),v=n(77),m=n(48),b=n(897),_=n(78),w=n(1064),E=r(w),S=n(770),O=r(S),C=n(863),T=n(40),A=n(1065),k=r(A),P=n(1071),x=r(P),I=n(275),M=n(318),U=n(1073),j=e.MessageInput=function(t){function e(){var t,n,r,a;o(this,e);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(u))),r.applyStopTyping=function(){},r.announceTyping=function(t){(0,r.props.publishUserTyping)(t,r.pusherClient)},r.handleOnFileAttached=function(t){if(t){r.clearChatInputErrorIfSet();var e=r.props,n=e.uploadChatFile,o=e.addChatInputError,i=(0,C.validateAttachment)(t),a=(0,C.isImageFile)(t)?"image":"attachment";i.length?o(i[0]):"image"===a?(0,x.default)(t).then(function(e){var r=e.data,o=e.height,i=e.width;n({file:t,type:a,result:r,fileProps:{height:o,width:i}})}):n({file:t,type:a}),r.focusInput()}},r.handleOnFileAttachmentClose=function(){r.focusInput()},r.handleOnChange=function(t){r.clearChatInputErrorIfSet(),r.updateMessage({cursorPosition:r.inputNode.selectionStart,value:t})},r.clearChatInputErrorIfSet=function(){var t=r.props,e=t.chatInputError,n=t.clearChatInputError;void 0!==e&&n&&n()},r.handleOnSelectEmoji=function(t,e){r.clearChatInputErrorIfSet();var n=r.props.currentValue.value,o=e.item.symbol,i=r.inputNode.selectionStart,a=n.substring(0,i),s=n.substring(i,n.length),u=[a,o,s].join(""),c=i+o.length;r.updateMessage({cursorPosition:c,value:u})},r.updateMessage=function(t){var e=t.cursorPosition,n=t.value;r.props.updateHistoryStack({cursorPosition:e,value:n},r.focusInput)},r.focusInput=function(){var t=r.props.currentValue.cursorPosition;r.inputNode&&(r.inputNode.focus(),r.inputNode.setSelectionRange(t,t))},r.handleOnSubmit=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=r.props,n=e.addChatMessage,o=e.createChatMessage,i=e.getChatBot,a=e.state,s=e.currentValue.value;if(r.applyStopTyping(),s&&(0,I.hasAnyChars)(s)){switch(r.clearChatInputErrorIfSet(),a){case T.CHAT_STATES.EMPTY:case T.CHAT_STATES.BOT_PROMPT_SUBJECT:n(s,{persist:!0}),i().emit(T.CHATBOT_EVENTS.USER_ANSWER_SUBJECT,s);break;case T.CHAT_STATES.BOT_PROMPT_EMAIL:n(s,{persist:!0}),i().emit(T.CHATBOT_EVENTS.USER_ANSWER_EMAIL,s);break;case T.CHAT_STATES.CREATING_ENVELOPE:n(s,{persist:!0});break;default:o(s,t)}r.clearInput(),r.focusInput()}},r.setApplyStopTyping=function(t){return r.applyStopTyping=t},r.inputRef=function(t){r.inputNode=t},a=n,i(r,a)}return a(e,t),s(e,[{key:"componentDidMount",value:function(){var t=this.context.store;this.pusherClient=(0,k.default)(t),this.focusInput()}},{key:"componentWillUnmount",value:function(){this.applyStopTyping()}},{key:"componentDidUpdate",value:function(t){var e=this.props.state,n=t.state,r=e===T.CHAT_STATES.ENDED&&e!==n;(0,d.default)(t,this.props)||r||this.focusInput()}},{key:"clearInput",value:function(){this.props.resetHistoryStack({cursorPosition:0,value:""},this.focusInput)}},{key:"render",value:function(){var t=this,e=this.props,n=e.currentValue.value,r=e.labels,o=e.shouldShowInputControls,i=e.chatInputError,a=i?[{field:"text",message:i}]:void 0;return c.default.createElement(U.WrapperUI,{className:"c-ChatMessageInput"},c.default.createElement("form",{autoComplete:"off","aria-label":"Live chat",onSubmit:function(t){t.preventDefault()},noValidate:!0},c.default.createElement(O.default,Object.assign({},this.props,{messageErrors:a,allowInputControls:o,"aria-label":"Write chat message",enterToSubmit:!0,className:"c-ChatMessageInput__Base",inputRef:this.inputRef,onFileAttached:this.handleOnFileAttached,onFileAttachmentClose:this.handleOnFileAttachmentClose,onChange:this.handleOnChange,onSelectEmoji:this.handleOnSelectEmoji,onStartTyping:function(){return t.announceTyping(!0)},onStopTyping:function(){return t.announceTyping(!1)},onSubmit:this.handleOnSubmit,placeholder:r.messageSubmitLabel,maxHeight:140,multiline:1,refApplyCallStopTyping:this.setApplyStopTyping,seamless:!0,showSendButton:!0,theme:"chat",typingTimeoutDelay:1500,typingThrottleInterval:2e3,withTypingEvent:!0,value:n}))),c.default.createElement(E.default,null),c.default.createElement(E.default.TopBorder,null))}}]),e}(u.Component);j.contextTypes={store:f.default.object},j.defaultProps={addChatMessage:M.noop,createChatMessage:M.noop,currentValue:{cursorPosition:0,value:""},getChatBot:M.noop,forceFocusInputProp:null,labels:{},publishUserTyping:M.noop,placeholder:"Send a message",resetHistoryStack:M.noop,uploadChatFile:M.noop,updateHistoryStack:M.noop,addChatInputError:M.noop,clearChatInputError:M.noop,onBlur:M.noop,onFocus:M.noop};var R=function(t){var e=t.chat,n=e.attachments,r=e.state;return{attachments:n?Object.values(n):[],chatInputError:(0,y.getChatInputError)(t),forceFocusInputProp:(0,v.getChatInputFocusUpdater)(t),labels:(0,g.getLabels)(t),shouldShowInputControls:r===T.CHAT_STATES.AGENT_CONNECTED,state:r}},N={addChatMessage:m.addChatMessage,addChatInputError:m.addChatInputError,clearChatInputError:m.clearChatInputError,createChatMessage:m.createChatMessage,getChatBot:m.getChatBot,onBlur:function(){return(0,_.updateChatInputFocus)(!1)},onFocus:function(){return(0,_.updateChatInputFocus)(!0)},publishUserTyping:b.publishUserTyping,uploadChatFile:m.uploadChatFile};e.default=(0,h.connect)(R,N)(j)},1064:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),o=n(893),i=function(t){return t&&t.__esModule?t:{default:t}}(o),a=n(77),s=function(t){return{hasBorder:!0,isFocused:(0,a.getChatInputIsFocused)(t)}};e.default=(0,r.connect)(s)(i.default)},1065:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1066),i=r(o),a=n(865),s=r(a),u=n(1068),c=r(u),l=n(23),f=n(28),h=n(27),p=n(1069),d=r(p),y=void 0,g=function(t){var e={authEndpoint:l.CHAT_API_URL+"/v1/pusher/auth",auth:function(){return{headers:{Authorization:(0,f.getChatHeader)(t.getState())}}},authorizer:c.default,cluster:l.PUSHER_APP_CLUSTER,disableStats:!0,encrypted:!0};return y||(y=new i.default(l.PUSHER_APP_KEY,e),"function"===typeof y.onError&&y.onError(function(e){var n=(0,h.getChatId)(t.getState());s.default.log({message:"PusherError",chatId:n,error:e})}),(0,d.default)({store:t,pusherClient:y})),y};e.default=g},1066:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.PUSHER=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(864),s=n(1067),u=r(s),c=n(10),l=r(c),f=e.PUSHER={SUBSCRIBE:"pusher:subscribe",SUBSCRIPTION_SUCCEEDED:"pusher:subscription_succeeded"};a.PusherWorker&&(a.PusherWorker.log=function(t){l.default.log("[2.1.86] "+t)});var h=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),this.appKey=e,this.pusherOptions=n,this.wrapMethod("onError"),this.wrapMethod("publish"),this.wrapMethod("subscribeToChannel"),this.wrapMethod("unsubscribeFromChannel")}return i(t,[{key:"connect",value:function(){var t=this,e=this.appKey,n=this.pusherOptions;this.pusher=this.pusher||new a.PusherWorker(e,n);var r=function(){return t.pusher.connection&&t.pusher.connection.socket_id};return new Promise(function(t){return(0,u.default)(r,function(){return t()})})}},{key:"wrapMethod",value:function(t){var e=this,n=this[t];this[t]=function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return e.connect().then(function(){return n.apply(e,[].concat(r))})}}},{key:"subscribeToChannel",value:function(t,e){var n=this.pusher.channel(t);n||(n=this.pusher.subscribe(t)),n.unbind_all(),n.bind_global(e)}},{key:"unsubscribeFromChannel",value:function(t){this.pusher.channel(t)&&this.pusher.unsubscribe(t)}},{key:"publish",value:function(t,e,n){var r=this,o=this.pusher.channel(t)||this.pusher.subscribe(t);if(o.subscribed)return o.trigger(e,n);var i=function t(){o.trigger(e,n),o.unbind(f.SUBSCRIPTION_SUCCEEDED,t),r.unsubscribeIfNoListeners(o)};o.bind(f.SUBSCRIPTION_SUCCEEDED,i)}},{key:"unsubscribeIfNoListeners",value:function(t){var e=t.callbacks,n=t.global_callbacks;0===Object.keys(e._callbacks).length+Object.keys(n).length&&this.pusher.unsubscribe(t.name)}},{key:"onError",value:function(t){this.pusher.connection.bind("error",t)}}]),t}();e.default=h},1067:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(10),o=function(t){return t&&t.__esModule?t:{default:t}}(r),i=function t(e,n,r,i,a){r||(r=200),void 0===i&&(i=50),void 0===a&&(a=1),e()?n():a<i?setTimeout(function(){t(e,n,r,i,a+1)},r):o.default.log("onceTrue timed out on condition",e)};e.default=i},1068:function(t,e,n){var r,o;!function(i,a){"object"===typeof t&&t.exports?t.exports=a(n(864).PusherWorker):(r=[n(864)],void 0!==(o=function(t){return a(t.PusherWorker)}.apply(e,r))&&(t.exports=o))}("undefined"!==typeof self&&self,function(t){function e(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(t[n],n,t)}function n(t,e,n){n="function"===typeof n?n():n;var r=0,o="&socket_id="+encodeURIComponent(e);for(var i in t)o+="&channel_name["+r+"]="+encodeURIComponent(i),r++;for(var a in n.params)o+="&"+encodeURIComponent(a)+"="+encodeURIComponent(n.params[a]);return o}function r(e,r,o,i,a){o="function"===typeof o?o():o;var s=t.Runtime.createXHR();s.open("POST",i,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var u in o.headers)s.setRequestHeader(u,o.headers[u]);s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status){var t,e=!1;try{t=JSON.parse(s.responseText),e=!0}catch(t){a(!0,"JSON returned from webapp was invalid, yet status code was 200. Data was: "+s.responseText)}e&&a(!1,t)}else a(!0,s.status)},s.send(n(e,r,o))}var o=function(t){this.options=t,this.authOptions=t.authOptions||{},this.requests={},this.setRequestTimeout()};o.prototype.add=function(t,e){this.requests[t]=e,this.requestTimeout||this.setRequestTimeout()},o.prototype.setRequestTimeout=function(){clearTimeout(this.requestTimeout),this.requestTimeout=setTimeout(function(){Object.keys(this.requests).length?(this.executeRequests(),this.setRequestTimeout()):this.requestTimeout=null}.bind(this),this.options.authDelay||0)},o.prototype.executeRequests=function(){var t=this.requests;this.requests={},r(t,this.options.socketId,this.authOptions,this.options.authEndpoint,function(n,r){n?e(t,function(t){t(!0,r)}):e(t,function(t,e){r[e]?r[e].status&&200!==r[e].status?t(!0,r[e].status):t(null,r[e].data):t(!0,404)})})};var i={};return function(t,e){return{authorize:function(n,r){var a=e.authEndpoint,s=n+":"+a,u=i[s];u||(u=i[s]=new o({socketId:n,authEndpoint:a,authDelay:e.authDelay,authOptions:e.auth})),u.add(t.name,r)}}}})},1069:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1070),i=n(64),a=r(i),s=n(106),u=r(s),c=n(27),l=function(t){var e=t.store,n=t.pusherClient,r=function(t,r){r=r||[],t.filter(function(t){return-1===r.indexOf(t)}).forEach(function(t){n.subscribeToChannel(t,function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.data?r.data:r,a=(0,o.handleEvent)({channel:t,event:n,payload:i});a&&e.dispatch(a)})}),r.filter(function(e){return-1===t.indexOf(e)}).forEach(function(t){return n.unsubscribeFromChannel(t)})},i=(0,a.default)(function(){return(0,c.getPusherChannels)(e.getState())},"",u.default);e.subscribe(i(r)),r((0,c.getPusherChannels)(e.getState()))};e.default=l},1070:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.handleEvent=void 0;var r=n(898),o=n(48),i=n(897);e.handleEvent=function(t){return function(e,n){var a=t.channel,s=t.event,u=void 0===s?"":s,c=t.payload;if(0!==u.indexOf("pusher:"))switch(u){case r.EVENT_ADDED:c.action===r.AGENT_DISCONNECTED?e((0,i.handleAgentDisconnectedChat)(c)):c.action===r.CUSTOMER_LEFT_CHAT&&e((0,i.handleCustomerLeftChat)());break;case r.MESSAGE_ADDED:e((0,o.fetchChatEvent)(c));break;case r.MESSAGE_UPDATED:e((0,o.updateChatEvent)(c));break;case r.CLIENT_AGENT_JOINED_CHAT:e((0,i.handleAgentJoinedChat)(c));break;case r.CLIENT_USER_TYPING:e((0,i.handleClientUserTyping)(c));break;case r.CUSTOMER_INACTIVE:e((0,i.handleCustomerInactivity)(c));break;case r.CHAT_ENDED:e((0,i.handleAgentEndedChat)(c))}else if((0,i.isPrivateChatEnvelopeChannel)(a)){var l=(0,i.getChatId)(a);e((0,o.fetchChatEnvelope)(l))}}}},1071:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resize=void 0;var r=n(317),o=function(t){return t&&t.__esModule?t:{default:t}}(r),i=n(863),a=n(1072),s=n(899),u=e.resize=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:720;return new Promise(function(n,r){(0,i.isImageFile)(t)||r(new Error("File is not a valid image.")),(0,s.readFile)(t).then(function(i){return(0,o.default)(i.result).then(function(r){if((0,a.isGif)(t)){var o={data:i.result,height:r.height,width:r.width};return n(o)}var s=document.createElement("canvas"),u=s.getContext("2d");r.height>e?(r.width*=e/r.height,r.height=e):r.width>e&&(r.height*=e/r.width,r.width=e),u.clearRect(0,0,s.width,s.height),s.width=r.width,s.height=r.height,u.drawImage(r,0,0,r.width,r.height);var c={data:s.toDataURL(t.type),height:s.height,width:s.width};n(c)}).catch(r)}).catch(r)})};e.default=u},1072:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isGif=void 0;var r=n(863),o=n(275);e.isGif=function(t){return(0,r.isImageFile)(t)&&(0,o.includes)(t.type,"gif")}},1073:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WrapperUI=void 0;var r=function(t,e){return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n  border-top: 2px solid white;\n  padding: 5px 4px 4px;\n  position: relative;\n\n  .c-ChatMessageInput__Base {\n    .c-MessageInput__input > .c-Input__item {\n      position: absolute;\n      right: 61px;\n      bottom: 12px;\n      display: flex;\n      align-items: flex-end;\n    }\n\n    .c-InputWrapper > .c-MessageInput__input > .c-InputField {\n      padding-right: 90px;\n      width: 100%;\n    }\n  }\n"],["\n  border-top: 2px solid white;\n  padding: 5px 4px 4px;\n  position: relative;\n\n  .c-ChatMessageInput__Base {\n    .c-MessageInput__input > .c-Input__item {\n      position: absolute;\n      right: 61px;\n      bottom: 12px;\n      display: flex;\n      align-items: flex-end;\n    }\n\n    .c-InputWrapper > .c-MessageInput__input > .c-InputField {\n      padding-right: 90px;\n      width: 100%;\n    }\n  }\n"]),o=n(9),i=function(t){return t&&t.__esModule?t:{default:t}}(o);e.WrapperUI=(0,i.default)("div")(r)},751:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(757);Object.defineProperty(e,"getErrorState",{enumerable:!0,get:function(){return r(o).default}});var i=n(758);Object.defineProperty(e,"getErrorMessageForField",{enumerable:!0,get:function(){return r(i).default}});var a=n(282);Object.defineProperty(e,"messageForm",{enumerable:!0,get:function(){return r(a).default}});var s=n(754);Object.defineProperty(e,"replyForm",{enumerable:!0,get:function(){return r(s).default}});var u=n(276);Object.defineProperty(e,"validForm",{enumerable:!0,get:function(){return r(u).default}})},754:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(276),o=function(t){return t&&t.__esModule?t:{default:t}}(r),i=function(t){return(0,o.default)({text:function(e,n){var r=n.attachments,o=void 0===r?[]:r;if(!e&&!o.length)return t.mayNotBeEmpty},attachments:(0,r.attachments)(t.attachmentSizeErrorText)})};e.default=i},755:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(774),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=o.default},757:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="string"===typeof e?e:e.name;return t.find(function(t){return t.field===n})?"error":""};e.default=r},758:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(275),o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="string"===typeof e?e:e.name,o=t.find(function(t){return t.field===n});return o?(0,r.capitalize)(o.message):""};e.default=o},770:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(38),c=r(u),l=n(0),f=r(l),h=n(1),p=(r(h),n(14)),d=r(p),y=n(145),g=n(771),v=r(g),m=n(766),b=r(m),_=n(776),w=r(_),E=n(280),S=n(792),O=r(S),C=n(32),T=n(275),A=n(751),k=n(794),P={allowAttachments:!0,allowInputControls:!0,attachments:[],autoFocus:!0,className:"",disabled:!1,enterToSubmit:!1,inputRef:function(){},label:"",labels:{},multiline:5,onBlur:function(){},onChange:function(){},onFocus:function(){},onEnterKeyPress:function(){},onFileAttached:function(){},onFileAttachmentClose:function(){},onFileRemoved:function(){},onSubmit:function(){},placeholder:"",removeStateStylesOnFocus:!1,required:!0,seamless:!1,showActions:!0,showSendButton:!1,state:"",theme:"reply",type:"text",value:""},x=["keydown","click","focus"],I=function(t){function e(t){o(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._isMounted=!1,n.cursor={start:0,end:0},n.captureCursor=n.captureCursor.bind(n),n.rebindInput=n.rebindInput.bind(n),n.setInput=n.setInput.bind(n),n.input=null,n}return a(e,t),s(e,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.bindInput()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.unbindInput(),this.input=null}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){this.setState({value:t.value}),t.forceFocusInputProp!==this.props.forceFocusInputProp&&this.forceFocusInput()}},{key:"bindInput",value:function(){var t=this;if(this.input){var e=this.props,n=e.enterToSubmit,r=e.onSubmit;x.forEach(function(e){return t.input.addEventListener(e,t.captureCursor)}),this.input.addEventListener("keydown",function(t){!(0,E.isModifierKeyPressed)(t)&&13===t.keyCode&&n&&(t.preventDefault(),r())})}}},{key:"unbindInput",value:function(){var t=this;this.input&&x.forEach(function(e){return t.input.removeEventListener(e,t.captureCursor)})}},{key:"captureCursor",value:function(){var t=this.input,e=t.value.length,n=e,r=e;"selectionStart"in t&&"selectionEnd"in t&&(n=t.selectionStart,r=t.selectionEnd),this.cursor={start:n,end:r}}},{key:"rebindInput",value:function(t){this.unbindInput(),this.input=t,this.bindInput()}},{key:"setInput",value:function(t){t&&(this.input&&this.input.type!==t.type?this.rebindInput(t):this.input=t,this.props.inputRef(t))}},{key:"getAttachmentError",value:function(){var t=this.props.messageErrors;return t&&t.find(function(t){return"attachments"===t.field})}},{key:"getHasAttachmentError",value:function(){var t=this.props.messageErrors;return!!(0,A.getErrorMessageForField)(t,"attachments")}},{key:"forceFocusInput",value:function(){var t=this;this.input&&requestAnimationFrame(function(){t._isMounted&&t.input.focus()})}},{key:"renderAttachmentErrors",value:function(){var t=this.props.messageErrors,e=(0,A.getErrorMessageForField)(t,"attachments");return e?f.default.createElement(k.ErrorMessageUI,null,e):null}},{key:"hasChatInputError",value:function(){var t=this.props,e=t.chatInputError;if("email"===t.type&&e)return!0}},{key:"getMessageInputState",value:function(){var t=this.props.messageErrors;return"error"===(0,A.getErrorState)(t,"attachments")?"error":(0,A.getErrorState)(t,"text")}},{key:"renderActions",value:function(){var t=this.props,e=t.allowAttachments,n=t.allowInputControls,r=t.attachments,o=t.attachmentsProgress,i=t.isChat,a=t.onFileAttached,s=t.onSelectEmoji,u=t.onSubmit,l=t.showActions,h=t.showSendButton,p=t.value;if(!l)return null;var y=(0,C.isMobile)(),g=(0,d.default)("c-MessageInput__actions",i&&"is-chat",y&&"is-mobile"),v=y&&h;return f.default.createElement(k.ActionsUI,{className:g},n&&f.default.createElement(c.default.Item,null,f.default.createElement(w.default,{attachments:r,attachmentsProgress:o,allowAttachments:e,onClose:this.forceFocusInput,onFileAttached:a,onSelectEmoji:s})),v&&f.default.createElement(c.default.Item,null,f.default.createElement(O.default,{isActive:p,onClick:function(){return u()}})))}},{key:"render",value:function(){var t=this.props,e=t.allowAttachments,n=t.attachments,r=t.autoFocus,o=t.chatInputError,i=t.disabled,a=t.errorMessage,s=t.isChat,u=t.label,c=t.maxHeight,l=t.messageErrors,h=t.multiline,p=t.onBlur,y=t.onChange,g=t.onFocus,m=t.onFileAttachmentClose,_=t.onFileRemoved,w=t.onStartTyping,E=t.onStopTyping,S=t.placeholder,O=t.refApplyCallStopTyping,P=t.removeStateStylesOnFocus,x=t.required,I=t.seamless,M=t.state,U=t.theme,j=t.typingThrottleInterval,R=t.typingTimeoutDelay,N=t.title,L=t.type,B=t.value,D=t.withTypingEvent,F=this.context.document,z=(0,C.isMobile)(),H=(0,d.default)("c-MessageInput",z&&"is-mobile",U&&"is-theme-"+U,N&&"is-"+(0,T.camelCase)(N),L&&"is-type-"+L,this.props.className),Y={autoFocus:r&&!z,"aria-label":this.props["aria-label"],"aria-invalid":"error"===M,chatInputError:o,disabled:i,errorMessage:a,label:u,maxHeight:c,multiline:h,onBlur:p,onChange:y,onFocus:g,onStartTyping:w,onStopTyping:E,placeholder:S,refApplyCallStopTyping:O,removeStateStylesOnFocus:P,required:x,seamless:I,state:M,tooltipAppendTo:F?F.body:window.document.body,type:L,title:N,typingThrottleInterval:j,typingTimeoutDelay:R,value:B,withTypingEvent:D},q=this.getHasAttachmentError(),V=void 0,G=void 0;if(s){var W=this.hasChatInputError();V=W?o:"",G=W?"error":""}else V=(0,A.getErrorMessageForField)(l,"text"),G=this.getMessageInputState();return f.default.createElement("div",{className:"c-MessageInputWrapper"},f.default.createElement(k.MessageInputUI,{className:H},f.default.createElement(b.default,Object.assign({},Y,{className:"c-MessageInput__input is-type-"+L,errorMessage:V,hasInsertCarriageReturns:!0,inputRef:this.setInput,state:G})),e&&n.length>0&&f.default.createElement(v.default,{attachments:n,attachmentError:this.getAttachmentError(),hasAttachmentError:q,onFileRemoved:_,onClose:m}),this.renderActions()),q&&this.renderAttachmentErrors())}}]),e}(l.PureComponent);I.contextType=y.FrameContext,I.defaultProps=P,e.default=I},771:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(772),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=o.default},772:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(146),c=r(u),l=n(21),f=r(l),h=n(38),p=r(h),d=n(75),y=r(d),g=n(0),v=r(g),m=n(1),b=(r(m),n(56)),_=r(b),w=n(773),E=function(t){function e(t){o(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={attachments:t.attachments,isOpen:!1},n.closeModal=n.closeModal.bind(n),n}return a(e,t),s(e,[{key:"UNSAFE_componentWillReceiveProps",value:function(t){var e=this.state.attachments,n=t.attachments;e.length!==n.length&&this.setState({attachments:n})}},{key:"shouldComponentUpdate",value:function(t,e){var n=this.props.hasAttachmentError,r=t.hasAttachmentError,o=this.state.attachments,i=e.attachments,a=o.length!==i.length,s=this.state.isOpen,u=e.isOpen,c=!0===s&&!1===u;return a||c||n!==r}},{key:"closeModal",value:function(){var t=this.props.onClose;this.setState({isOpen:!1}),t()}},{key:"onFileRemoved",value:function(t,e){e.preventDefault(),this.setState({isOpen:!(1===this.state.attachments.length)}),this.props.onFileRemoved(t)}},{key:"getErrorState",value:function(t){var e=this.props.attachmentError,n=e&&e.data&&e.data.some(function(e){return e.attachmentFileName===t.attachmentFileName});return e&&n?"error":void 0}},{key:"renderTriggerButton",value:function(){var t=this.state.attachments,e=t.length,n=e>0,r=1===e?"1 file":e+" files";return v.default.createElement(w.ButtonUI,{onClick:function(t){return t.preventDefault()}},v.default.createElement(y.default,{in:n,duration:450,easing:"elastic",sequence:"fade scale"},v.default.createElement(w.BadgeUI,null,r)))}},{key:"render",value:function(){var t=this,e=this.state.attachments;return 0===e.length?null:v.default.createElement(w.MessageAttachmentsUI,null,v.default.createElement(_.default,{cardClassName:"c-MessageAttachmentsModal__Card",className:"c-MessageAttachmentsModal c-Modal--bottom",closeIcon:!1,isOpen:this.state.isOpen,onClose:this.closeModal,trigger:this.renderTriggerButton()},v.default.createElement(_.default.Body,null,v.default.createElement(w.MessageAttachmentsList,null,e.map(function(e,n){var r=e.attachmentType;return v.default.createElement("li",{key:"attachment-"+n,"data-cy":"ListItem"},v.default.createElement(p.default,{gap:"sm"},v.default.createElement(p.default.Item,null,v.default.createElement(f.default,{name:"image"===r?"image":"attachment",shade:"extraMuted",size:24,state:t.getErrorState(e)})),v.default.createElement(p.default.Block,null,v.default.createElement(w.TextUI,{size:"13",block:!0,muted:!0,state:t.getErrorState(e)},v.default.createElement(c.default,{type:"middle",limit:32},e.attachmentFileName))),v.default.createElement(p.default.Item,null,v.default.createElement(w.RemoveIconUI,{buttonSize:"sm",icon:"cross-small",onClick:function(e){return t.onFileRemoved.bind(t,n)(e)}}))))})))))}}]),e}(g.Component);E.defaultProps={attachments:[],onFileRemoved:function(){},onClose:function(){}},e.default=E},773:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}Object.defineProperty(e,"__esModule",{value:!0}),e.TextUI=e.MessageAttachmentsList=e.RemoveIconUI=e.BadgeUI=e.ButtonUI=e.MessageAttachmentsUI=void 0;var i=o(["\n  bottom: 9px;\n  display: flex;\n  height: 22px;\n  position: absolute;\n  left: 12px;\n  width: 60px;\n  z-index: 2;\n"],["\n  bottom: 9px;\n  display: flex;\n  height: 22px;\n  position: absolute;\n  left: 12px;\n  width: 60px;\n  z-index: 2;\n"]),a=o(["\n  background: transparent;\n  border: 0;\n  height: 18px;\n  line-height: 18px;\n  padding: 0;\n\n  &:focus,\n  &:hover,\n  &:active {\n    .c-Badge {\n      background: ",";\n    }\n  }\n"],["\n  background: transparent;\n  border: 0;\n  height: 18px;\n  line-height: 18px;\n  padding: 0;\n\n  &:focus,\n  &:hover,\n  &:active {\n    .c-Badge {\n      background: ",";\n    }\n  }\n"]),s=o(["\n  background: ",";\n"],["\n  background: ",";\n"]),u=o(["\n  margin-right: -8px;\n\n  .c-Icon {\n    color: ",";\n  }\n\n  &:hover .c-Icon {\n    color: ",";\n  }\n"],["\n  margin-right: -8px;\n\n  .c-Icon {\n    color: ",";\n  }\n\n  &:hover .c-Icon {\n    color: ",";\n  }\n"]),c=o(["\n  list-style: none;\n  padding: 7px 0;\n  margin-bottom: 0;\n\n  li {\n    padding: 4px 0;\n  }\n"],["\n  list-style: none;\n  padding: 7px 0;\n  margin-bottom: 0;\n\n  li {\n    padding: 4px 0;\n  }\n"]),l=o(["\n  line-height: 24px;\n"],["\n  line-height: 24px;\n"]),f=n(37),h=r(f),p=n(765),d=r(p),y=n(9),g=r(y),v=n(5),m=n(755),b=r(m);e.MessageAttachmentsUI=(0,g.default)("div")(i),e.ButtonUI=(0,g.default)("button")(a,(0,v.getColor)("grey.800")),e.BadgeUI=(0,g.default)(d.default)(s,(0,v.getColor)("grey.600")),e.RemoveIconUI=(0,g.default)(b.default)(u,(0,v.getColor)("grey.700"),(0,v.getColor)("red.500")),e.MessageAttachmentsList=(0,g.default)("ul")(c),e.TextUI=(0,g.default)(h.default)(l)},774:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}Object.defineProperty(e,"__esModule",{value:!0});var i=n(21),a=r(i),s=n(0),u=r(s),c=n(1),l=(r(c),n(14)),f=r(l),h=n(775),p={block:!1,icon:"meatball",size:"24",tabIndex:-1},d=function(t){var e=t.buttonSize,n=t.className,r=t.icon,i=t.size,s=t.state,c=t.tabIndex,l=t.accessibilityLabel,p=o(t,["buttonSize","className","icon","size","state","tabIndex","accessibilityLabel"]),d=(0,f.default)("c-IconButton",e&&"is-"+e,n);return u.default.createElement(h.IconButtonUI,Object.assign({className:d,tabIndex:c,"aria-label":l},p),u.default.createElement(a.default,{name:r,size:i,state:s,"aria-hidden":!0}))};d.defaultProps=p,e.default=d},775:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IconButtonUI=void 0;var r=function(t,e){return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n  background-color: transparent;\n  border: 1px solid transparent;\n  color: ",";\n  height: 32px;\n  line-height: 30px;\n  padding-left: 2px;\n  padding-right: 2px;\n  transition: color 100ms linear;\n\n  &:hover,\n  &:focus,\n  &:active {\n    color: ",";\n  }\n\n  &.is-sm {\n    height: 22px;\n  }\n\n  &.no-padding {\n    padding-left: 0;\n    padding-right: 0;\n  }\n"],["\n  background-color: transparent;\n  border: 1px solid transparent;\n  color: ",";\n  height: 32px;\n  line-height: 30px;\n  padding-left: 2px;\n  padding-right: 2px;\n  transition: color 100ms linear;\n\n  &:hover,\n  &:focus,\n  &:active {\n    color: ",";\n  }\n\n  &.is-sm {\n    height: 22px;\n  }\n\n  &.no-padding {\n    padding-left: 0;\n    padding-right: 0;\n  }\n"]),o=n(9),i=function(t){return t&&t.__esModule?t:{default:t}}(o),a=n(5);e.IconButtonUI=(0,i.default)("button")(r,(0,a.getColor)("charcoal.300"),(0,a.getColor)("charcoal.400"))},776:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(777),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=o.default},777:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(60),c=r(u),l=n(0),f=r(l),h=n(1),p=r(h),d=n(778),y=r(d),g=n(781),v=r(g),m=n(787),b=r(m),_=n(755),w=r(_),E=n(56),S=r(E),O=n(791),C=n(32),T=function(t){function e(){var t,n,r,a;o(this,e);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(u))),r.isIE=(0,C.isIE)(),r.state={showEmojiPicker:!1},r.handleFileAttached=function(t){var e=r.props.onFileAttached;if(t){e(t,-1!==t.type.indexOf("image")?"image":t)}},r.handleFileSelected=function(t){r.handleFileAttached(t.target.files[0])},r.handleFileDrop=function(t){r._hiddenInput&&t&&r.handleFileAttached(t.dataTransfer.files[0])},r.handleOnAttachmentIconClick=function(t){t.preventDefault(),r._hiddenInput&&(r._hiddenInput.value="",r._hiddenInput.click())},r.handleOnEmojiPickerIconClick=function(t){t.preventDefault(),r.setState({showEmojiPicker:!r.state.showEmojiPicker})},r.handleEmojiSelected=function(t,e){r.setState({showEmojiPicker:!1}),r.props.onSelectEmoji(t,e)},r.hiddenInputRef=function(t){r._hiddenInput=t},a=n,i(r,a)}return a(e,t),s(e,[{key:"shouldAllowAttachments",value:function(){var t=this.props,e=t.allowAttachments,n=t.attachments,r=t.maxAttachments;return e&&n.length<r}},{key:"renderHiddenInput",value:function(){return this.shouldAllowAttachments()&&f.default.createElement(c.default,null,f.default.createElement("input",{type:"file",name:"file",onChange:this.handleFileSelected,ref:this.hiddenInputRef,tabIndex:-1}))}},{key:"renderUploadIcon",value:function(){return this.shouldAllowAttachments()&&f.default.createElement(w.default,{accessibilityLabel:"Attach a file",icon:"image-add",onClick:this.handleOnAttachmentIconClick,tabIndex:0})}},{key:"renderEmojiPickerIcon",value:function(){return!this.isIE&&f.default.createElement(w.default,{accessibilityLabel:"Emoji Picker","data-cy":"EmojiPickerTrigger",icon:"emoji",onClick:this.handleOnEmojiPickerIconClick,tabIndex:0})}},{key:"renderEmojiPicker",value:function(){return f.default.createElement(v.default,{in:this.state.showEmojiPicker,onSelect:this.handleEmojiSelected})}},{key:"renderDragAndDropComponent",value:function(){return this.shouldAllowAttachments()&&f.default.createElement(y.default,{onDrop:this.handleFileDrop})}},{key:"renderFileUploader",value:function(){var t=this.props,e=t.allowAttachments,n=t.attachments,r=t.attachmentsProgress,o=!!r;return e&&f.default.createElement(S.default,{className:"c-Modal--bottom",closeIcon:!1,isOpen:o},f.default.createElement(S.default.Body,null,f.default.createElement(b.default,{attachments:n,uploadProgress:r})))}},{key:"render",value:function(){return f.default.createElement(O.InputControlsUI,{isIE:this.isIE},this.renderHiddenInput(),this.renderUploadIcon(),this.renderEmojiPickerIcon(),this.renderEmojiPicker(),this.renderDragAndDropComponent(),this.renderFileUploader())}}]),e}(l.Component);T.propType={attachments:p.default.arrayOf(p.default.shape({attachmentId:p.default.number,attachmentType:p.default.oneOf(["file","image"]).isRequired,attachmentFileName:p.default.string.isRequired,attachmentFile:p.default.object})),attachmentsProgress:p.default.number,maxAttachments:p.default.number,onFileAttached:p.default.func,onSelectEmoji:p.default.func},T.defaultProps={attachments:[],attachmentsProgress:0,maxAttachments:3,onFileAttached:function(){},onSelectEmoji:function(){}},e.default=T},778:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(779),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=o.default},779:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(21),c=r(u),l=n(0),f=r(l),h=n(14),p=r(h),d=n(748),y=r(d),g=n(145),v=n(780),m=function(t){function e(){var t,n,r,a;o(this,e);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(u))),r.state={isExpanded:!1,isVisible:!1},r._isMounted=!1,r.node=null,r.dropzoneNode=null,r.onDragEnter=function(t){r.state.isVisible||(r.onDragOver(t),r.safeSetState({isVisible:!0},function(){return setTimeout(function(){return r.safeSetState({isExpanded:!0})},100)}))},r.onDragLeave=function(t){t.preventDefault(),t.stopPropagation(),r.safeSetState({isExpanded:!1},function(){return setTimeout(function(){return r.safeSetState({isVisible:!1})},250)})},r.onDragOver=function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},r.onDrop=function(t){return t.preventDefault(),r.props.onDrop(t),r.onDragLeave(t),!1},r.safeSetState=function(t,e){r._isMounted&&r.setState(t,e)},r.setNodeRef=function(t){r.dropzoneNode=t},a=n,i(r,a)}return a(e,t),s(e,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.document=this.context.document,this.node=this.document.querySelector(this.props.droppableSelector),this.node&&this.node.addEventListener("dragover",this.onDragEnter),this.dropzoneNode.addEventListener("drop",this.onDrop)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.node&&this.node.removeEventListener("dragover",this.onDragEnter),this.dropzoneNode.removeEventListener("drop",this.onDrop)}},{key:"render",value:function(){var t=(0,p.default)("c-DropzoneOverlay",this.state.isVisible&&"is-visible"),e=(0,p.default)("c-DropzoneIndicator",this.state.isExpanded&&"is-expanded");return f.default.createElement(v.DropzoneOverlayUI,Object.assign({className:t,ref:this.setNodeRef,onDragLeave:this.onDragLeave,onDragOver:this.onDragOver},(0,y.default)(this.props)),f.default.createElement(v.DropzoneIndicatorUI,{className:e},f.default.createElement(c.default,{name:"cross-large"})))}}]),e}(l.Component);m.defaultProps={droppableSelector:".c-BeaconContainerContent",onDrop:function(){}},m.contextType=g.FrameContext,e.default=m},780:function(t,e,n){"use strict";function r(t,e){return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}Object.defineProperty(e,"__esModule",{value:!0}),e.DropzoneIndicatorUI=e.DropzoneOverlayUI=void 0;var o=r(["\n  align-items: center;\n  bottom: 0;\n  display: none;\n  justify-content: center;\n  left: 0;\n  position: fixed;\n  right: 0;\n  top: 0;\n  z-index: 9;\n\n  &.is-visible {\n    display: flex;\n  }\n"],["\n  align-items: center;\n  bottom: 0;\n  display: none;\n  justify-content: center;\n  left: 0;\n  position: fixed;\n  right: 0;\n  top: 0;\n  z-index: 9;\n\n  &.is-visible {\n    display: flex;\n  }\n"]),i=r(["\n  align-items: center;\n  background-color: ",";\n  border-radius: 0;\n  display: flex;\n  height: 0;\n  justify-content: center;\n  opacity: 0.8;\n  pointer-events: none;\n  position: absolute;\n  transition: all ease-in-out 0.2s;\n  width: 0;\n  will-change: width, height, border-radius;\n\n  &.is-expanded {\n    border-radius: 800px;\n    height: 800px;\n    width: 800px;\n  }\n\n  .c-Icon {\n    color: white;\n    transform: rotate(45deg);\n  }\n"],["\n  align-items: center;\n  background-color: ",";\n  border-radius: 0;\n  display: flex;\n  height: 0;\n  justify-content: center;\n  opacity: 0.8;\n  pointer-events: none;\n  position: absolute;\n  transition: all ease-in-out 0.2s;\n  width: 0;\n  will-change: width, height, border-radius;\n\n  &.is-expanded {\n    border-radius: 800px;\n    height: 800px;\n    width: 800px;\n  }\n\n  .c-Icon {\n    color: white;\n    transform: rotate(45deg);\n  }\n"]),a=n(9),s=function(t){return t&&t.__esModule?t:{default:t}}(a),u=n(5);e.DropzoneOverlayUI=(0,s.default)("div")(o),e.DropzoneIndicatorUI=(0,s.default)("div")(i,function(t){return(0,u.getThemeBrandProp)(t,"brandColor")})},781:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(782),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=o.default},782:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(783),c=r(u),l=n(0),f=r(l),h=n(785),p=n(786),d=function(t){function e(){var t,n,r,a;o(this,e);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(u))),r.onEmojiSelected=function(t,e){t.preventDefault(),r.props.onSelect(e,{item:e})},a=n,i(r,a)}return a(e,t),s(e,[{key:"render",value:function(){var t=this;return f.default.createElement(p.EmojiPickerUI,{sequence:"fade up",duration:80,in:this.props.in},h.emojiSet.map(function(e){return f.default.createElement(p.EmojiPickerButtonUI,{"data-cy":"EmojiPickerButton",key:e.name,onClick:function(n){return t.onEmojiSelected(n,e)}},f.default.createElement(c.default,e))}))}}]),e}(f.default.Component);d.defaultProps={onSelect:function(){}},e.default=d},783:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(784)),o=r.default;e.default=o},784:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(){return o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o.apply(this,arguments)}function i(t,e){if(null==t)return{};var n,r,o=a(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function a(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}function s(t){var e=t["data-cy"],n=void 0===e?"EmojiPickerEmoji":e,r=t.className,a=void 0===r?"":r,s=t.name,c=void 0===s?"Unicorn Face":s,h=t.symbol,p=void 0===h?"ü¶Ñ":h,d=i(t,["data-cy","className","name","symbol"]);return u.default.createElement("span",o({},(0,l.default)(d),{"data-cy":n,"aria-label":c,className:(0,f.classNames)("c-EmojiPickerView",a),role:"img"}),p)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=r(n(0)),c=r(n(1)),l=r(n(3)),f=n(2);s.propTypes={className:c.default.string,name:c.default.string,symbol:c.default.string,"data-cy":c.default.string};var h=s;e.default=h},785:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.emojiSet=e.defaultEmoji=void 0;var r={colons:[":unicorn_face:"],hoverBackgroundColor:"purple",name:"Unicorn Face",symbol:"ü¶Ñ",unified:"1f984",value:"Unicorn Face"};e.defaultEmoji=r;var o=[r,{colons:[":heart:"],hoverBackgroundColor:"red",name:"Heart",symbol:"‚ù§Ô∏è",unified:"2764-fe0f",value:"Heart"},{colons:[":slightly_smiling_face:"],hoverBackgroundColor:"grey",name:"Slightly Smiling Face",symbol:"üôÇ",unified:"1f642",value:"Slightly Smiling Face"},{colons:[":slightly_frowning_face:"],hoverBackgroundColor:"yellow",name:"Slightly Frowning Face",symbol:"üôÅ",unified:"1f641",value:"Slightly Frowning Face"},{colons:[":+1:",":thumbs_up:"],hoverBackgroundColor:"yellow",name:"Thumbs Up Sign",symbol:"üëç",unified:"1f44d",value:"Thumbs Up Sign"},{colons:[":-1:",":thumbs_down"],hoverBackgroundColor:"yellow",name:"Thumbs Down Sign",symbol:"üëé",unified:"1f44e",value:"Thumbs Down Sign"}];e.emojiSet=o},786:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}Object.defineProperty(e,"__esModule",{value:!0}),e.EmojiPickerButtonUI=e.EmojiPickerUI=void 0;var i=o(["\n  background-color: white;\n  border: 1px solid rgba(193, 203, 212, 0.7);\n  border-radius: 4px;\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);\n  position: absolute;\n  display: flex;\n  right: 6px;\n  top: -47px;\n  padding: 0 5px;\n"],["\n  background-color: white;\n  border: 1px solid rgba(193, 203, 212, 0.7);\n  border-radius: 4px;\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);\n  position: absolute;\n  display: flex;\n  right: 6px;\n  top: -47px;\n  padding: 0 5px;\n"]),a=o(["\n  background: none;\n  border: none;\n  padding: 0;\n\n  margin: 3px;\n  height: 34px;\n  width: 34px;\n\n  & .c-EmojiPickerView {\n    font-size: 24px;\n    width: 24px;\n    height: 24px;\n  }\n"],["\n  background: none;\n  border: none;\n  padding: 0;\n\n  margin: 3px;\n  height: 34px;\n  width: 34px;\n\n  & .c-EmojiPickerView {\n    font-size: 24px;\n    width: 24px;\n    height: 24px;\n  }\n"]),s=n(75),u=r(s),c=n(9),l=r(c);e.EmojiPickerUI=(0,l.default)(u.default)(i),e.EmojiPickerButtonUI=(0,l.default)("button")(a)},787:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(37),c=r(u),l=n(788),f=r(l),h=n(76),p=r(h),d=n(0),y=r(d),g=n(1),v=(r(g),function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){var t=this.props,e=t.uploadProgress,n=t.attachments,r=void 0===n?[]:n;if(!e||0===r.length)return null;var o=r.length>1,i=o?r.length+" files":r[0].attachmentFileName;return y.default.createElement("div",{className:"c-FileUploader"},y.default.createElement("div",{className:"c-FileUploader__progressWrapper"},y.default.createElement(p.default,{className:"c-FileUploader__heading",size:"h6"},"Uploading‚Ä¶"),y.default.createElement(c.default,{className:"c-FileUploader__text",block:!0,size:"13",muted:!0},i),y.default.createElement("div",{className:"c-FileUploader__progressBarWrapper"},y.default.createElement(f.default,{className:"c-FileUploader__progressBar",value:e}))))}}]),e}(d.Component));v.defaultProps={attachments:[],uploadProgress:0},e.default=v},788:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(789)),o=r.default;e.default=o},789:function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return t&&t.__esModule?t:{default:t}}function i(){return i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i.apply(this,arguments)}function a(t,e){if(null==t)return{};var n,r,o=s(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function s(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function f(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=g();return function(){var n,r=v(t);if(e){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var m=o(n(0)),b=o(n(1)),_=o(n(3)),w=n(2),E=n(8),S=n(790),O=function(t){function e(){return u(this,e),n.apply(this,arguments)}f(e,t);var n=p(e);return l(e,[{key:"UNSAFE_componentWillReceiveProps",value:function(t){(0,this.props.onChange)(this.getValueAsPercent(t.value))}},{key:"getValue",value:function(t){var e=null!=t?t:this.props.value,n=parseFloat("".concat(e));return n>100?100:n<0?0:n}},{key:"getValueAsPercent",value:function(t){return"".concat(this.getValue(t),"%")}},{key:"render",value:function(){var t=this.props,e=t.className,n=t.description,r=t.size,o=t.value,s=(t.onChange,a(t,["className","description","size","value","onChange"])),u=(0,w.classNames)("c-ProgressBar",r&&"is-".concat(r),e);return m.default.createElement(S.ProgressBarUI,i({},(0,_.default)(s),{className:u,role:"progressbar","aria-valuenow":Number(o),"aria-valuemin":0,"aria-valuemax":100,"aria-valuetext":n}),m.default.createElement(S.BarUI,{className:"c-ProgressBar__bar",width:this.getValueAsPercent(o)}))}}]),e}(m.default.PureComponent);O.defaultProps={"data-cy":"ProgressBar",onChange:E.noop,value:0,size:"md"},O.propTypes={className:b.default.string,description:b.default.string,onChange:b.default.func,size:b.default.oneOf(["sm","md","lg"]),value:b.default.oneOfType([b.default.number,b.default.string]),"data-cy":b.default.string};var C=O;e.default=C},790:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.BarUI=e.ProgressBarUI=void 0;var o=r(n(4)),i=n(5),a=r(n(15)),s={lg:10,md:6,sm:2},u=o.default.div.withConfig({displayName:"ProgressBarcss__ProgressBarUI",componentId:"sc-1j4th2x-0"})(["background-color:",";border-radius:200px;height:","px;width:100%;",";"],(0,i.getColor)("grey.300"),6,function(){return(0,a.default)(s,function(t,e){return"\n      &.is-".concat(t," {\n        height: ").concat(e,"px;\n      }\n    ")})}());e.ProgressBarUI=u;var c=o.default.div.withConfig({displayName:"ProgressBarcss__BarUI",componentId:"sc-1j4th2x-1"})(["background:linear-gradient( to right,",","," );border-radius:200px;height:100%;transition:width 0.3s ease;width:",";"],(0,i.getColor)("green.400"),(0,i.getColor)("green.500"),function(t){return t.width?t.width:"0%"});e.BarUI=c},791:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InputControlsUI=void 0;var r=function(t,e){return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n  display: flex;\n  height: 30px;\n  width: ",";\n  z-index: 2;\n"],["\n  display: flex;\n  height: 30px;\n  width: ",";\n  z-index: 2;\n"]),o=n(9),i=function(t){return t&&t.__esModule?t:{default:t}}(o);e.InputControlsUI=(0,i.default)("div")(r,function(t){return t.isIE?"40px":"63px"})},792:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(21),c=r(u),l=n(0),f=r(l),h=n(14),p=r(h),d=n(793),y=function(t){function e(){var t,n,r,a;o(this,e);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(u))),r.handleOnClick=function(t){r.props.isActive&&r.props.onClick(t)},a=n,i(r,a)}return a(e,t),s(e,[{key:"getClassNames",value:function(){var t=this.props,e=t.className,n=t.isActive;return(0,p.default)("c-MessageInputSendButton",n&&"is-active",e)}},{key:"render",value:function(){return f.default.createElement(d.SendButtonUI,Object.assign({},this.props,{className:this.getClassNames(),onClick:this.handleOnClick}),f.default.createElement(c.default,{name:"arrow-left",size:"24",title:"Send"}))}}]),e}(l.PureComponent);y.defaultProps={isActive:!1,type:"button"},e.default=y},793:function(t,e,n){"use strict";function r(t){var e=(0,s.getThemeBrandProp)(t,"brandColor");return"\n    border-color: "+e+";\n    color: "+(0,s.getThemeBrandProp)(t,"textColor")+";\n\n    &.is-active {\n      background-color: "+e+";\n    }\n  "}Object.defineProperty(e,"__esModule",{value:!0}),e.SendButtonUI=void 0;var o=function(t,e){return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n  appearance: none;\n  background: #ddd;\n  border: none;\n  border-radius: 32px !important;\n  color: white;\n  cursor: pointer;\n  display: block;\n  width: 32px;\n  height: 32px;\n  outline: none !important;\n  padding: 4px;\n  position: relative;\n  top: 1px;\n  transform: rotate(90deg);\n  transition: background 100ms linear;\n\n  ",";\n"],["\n  appearance: none;\n  background: #ddd;\n  border: none;\n  border-radius: 32px !important;\n  color: white;\n  cursor: pointer;\n  display: block;\n  width: 32px;\n  height: 32px;\n  outline: none !important;\n  padding: 4px;\n  position: relative;\n  top: 1px;\n  transform: rotate(90deg);\n  transition: background 100ms linear;\n\n  ",";\n"]),i=n(9),a=function(t){return t&&t.__esModule?t:{default:t}}(i),s=n(5);e.SendButtonUI=(0,a.default)("button")(o,r)},794:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorMessageUI=e.ActionsUI=e.MessageInputUI=void 0;var i=o(["\n  position: relative;\n\n  .c-Input__item.is-suffix.is-icon {\n    margin-right: 8px !important;\n  }\n\n  .c-InputField {\n    min-height: 47px !important;\n    line-height: 20px !important;\n  }\n\n  &.is-theme-chat {\n    .c-Input.is-multiline {\n      .c-InputField,\n      .c-InputGhost {\n        padding-left: 12px;\n        padding-right: 71px;\n      }\n    }\n    .c-InputControls {\n      bottom: 0;\n    }\n\n    &.is-type-email {\n      margin-bottom: 2px;\n      padding-bottom: 0px;\n      padding-top: 2px;\n      .c-InputField {\n        padding-left: 12px;\n        padding-right: 12px;\n      }\n    }\n  }\n\n  &.is-theme-reply {\n    .c-Input.is-multiline {\n      padding-bottom: 36px;\n    }\n  }\n\n  &.is-mobile {\n    .c-Input.is-multiline {\n      .c-InputField,\n      .c-InputGhost {\n        padding-right: 90px;\n      }\n    }\n  }\n"],["\n  position: relative;\n\n  .c-Input__item.is-suffix.is-icon {\n    margin-right: 8px !important;\n  }\n\n  .c-InputField {\n    min-height: 47px !important;\n    line-height: 20px !important;\n  }\n\n  &.is-theme-chat {\n    .c-Input.is-multiline {\n      .c-InputField,\n      .c-InputGhost {\n        padding-left: 12px;\n        padding-right: 71px;\n      }\n    }\n    .c-InputControls {\n      bottom: 0;\n    }\n\n    &.is-type-email {\n      margin-bottom: 2px;\n      padding-bottom: 0px;\n      padding-top: 2px;\n      .c-InputField {\n        padding-left: 12px;\n        padding-right: 12px;\n      }\n    }\n  }\n\n  &.is-theme-reply {\n    .c-Input.is-multiline {\n      padding-bottom: 36px;\n    }\n  }\n\n  &.is-mobile {\n    .c-Input.is-multiline {\n      .c-InputField,\n      .c-InputGhost {\n        padding-right: 90px;\n      }\n    }\n  }\n"]),a=o(["\n  bottom: 9px;\n  position: absolute;\n  right: 3px;\n  z-index: 9;\n"],["\n  bottom: 9px;\n  position: absolute;\n  right: 3px;\n  z-index: 9;\n"]),s=o(["\n  background-color: #ffe3e2;\n  border-radius: 3px;\n  color: #9d1f1a;\n  font-size: 12px;\n  line-height: 28px;\n  margin: 5px 0;\n  padding: 8px 16px;\n"],["\n  background-color: #ffe3e2;\n  border-radius: 3px;\n  color: #9d1f1a;\n  font-size: 12px;\n  line-height: 28px;\n  margin: 5px 0;\n  padding: 8px 16px;\n"]),u=n(38),c=r(u),l=n(9),f=r(l);e.MessageInputUI=(0,f.default)("div")(i),e.ActionsUI=(0,f.default)(c.default)(a),e.ErrorMessageUI=(0,f.default)("div")(s)},795:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function s(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(105),l=r(c),f=n(0),h=r(f),p=n(1),d=(r(p),n(151)),y=r(d),g=n(796),v=function(t){function e(){var t,n,r,s;i(this,e);for(var u=arguments.length,c=Array(u),l=0;l<u;l++)c[l]=arguments[l];return n=r=a(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(c))),r.state={historyStack:(0,g.createHistoryStack)(r.props.initialHistory)},r.node=null,r.synchronizeStackWithExternalChange=function(){r.setState(function(t){return{historyStack:Object.assign({},t.historyStack,{present:r.props.initialHistory,past:[].concat(o(t.historyStack.past),[t.historyStack.present])})}})},r.updateHistoryStack=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=(0,g.updateCurrentStackItem)(t,r.state.historyStack);r.updateAndPersistStackState(n,e)},r.resetHistoryStack=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=(0,g.createHistoryStack)(t);r.updateAndPersistStackState(n,e)},r.handleOnUndoKeyDown=function(t){if(r.isEventFromChildren(t)&&(t.preventDefault(),t.stopPropagation(),!t.shiftKey)){var e=(0,g.undoStackHistory)(r.state.historyStack);r.updateAndPersistStackState(e)}},r.handleOnRedoKeyDown=function(t){if(r.isEventFromChildren(t)&&(t.preventDefault(),t.stopPropagation(),t.shiftKey)){var e=(0,g.redoStackHistory)(r.state.historyStack);r.updateAndPersistStackState(e)}},r.isEventFromChildren=function(t){return r.node.contains(t.target)},r.updateAndPersistStackState=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=t.present;r.setState({historyStack:t},function(){r.props.externalStateUpdater(n),e(n)})},r.setNodeRef=function(t){r.node=t},s=n,a(r,s)}return s(e,t),u(e,[{key:"componentDidUpdate",value:function(t,e){var n=t.initialHistory.value!==this.props.initialHistory.value,r=this.props.initialHistory.value!==this.state.historyStack.present.value;n&&r&&this.synchronizeStackWithExternalChange()}},{key:"renderChildren",value:function(){var t=this.props.children,e=this.state.historyStack.present;return h.default.cloneElement(t,{resetHistoryStack:this.resetHistoryStack,updateHistoryStack:this.updateHistoryStack,currentValue:e})}},{key:"render",value:function(){return h.default.createElement("div",{ref:this.setNodeRef,className:"c-UndoRedoHistoryStack"},h.default.createElement(l.default,{keyCode:y.default.KEY_Z,modifier:"meta",handler:this.handleOnUndoKeyDown,type:"keydown"}),h.default.createElement(l.default,{keyCode:y.default.KEY_Z,modifier:"meta",handler:this.handleOnRedoKeyDown,type:"keydown"}),this.renderChildren())}}]),e}(f.Component);v.defaultProps={initialHistory:g.defaultHistoryStack,externalStateUpdater:function(){}},e.default=v},796:function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=e.defaultHistoryStack={past:[],present:"",future:[]},i=(e.createHistoryStack=function(t){return t?Object.assign({},o,{present:t}):o},e.checkHistoryValidity=function(t){if(!t)throw new ReferenceError("A stack history object is required but was not supplied.");var e=t.past,n=t.present,r=t.future;if(!e||void 0===n||!r)throw new ReferenceError('"past", "present", and "future" properties MUST all be present on passed history object.');if(!Array.isArray(e)||!Array.isArray(r))throw new TypeError('"past" and "future" properties MUST be arrays.')});e.updateCurrentStackItem=function(t,e){i(e);var n=e.past,o=e.present;return{past:[].concat(r(n),[o]),present:t,future:[]}},e.undoStackHistory=function(t){if(i(t),!t.past.length>0)return t;var e=t.past,n=t.present,o=t.future,a=e.slice(0,e.length-1),s=[n].concat(r(o));return{past:a,present:e[e.length-1],future:s}},e.redoStackHistory=function(t){if(i(t),!t.future.length)return t;var e=t.past,n=t.present,o=t.future;return{past:[].concat(r(e),[n]),present:o[0],future:o.slice(1,o.length)}},e.getCurrentStackItem=function(t){return t.present}},863:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateAttachment=e.isValidFileAttachment=e.isValidImageAttachment=e.isImageFile=e.isFileWithinSizeLimit=e.ERROR_MESSAGES=void 0;var r=n(899),o=n(275),i=e.ERROR_MESSAGES={INVALID:"Attachment is an invalid file.",TOO_LARGE:"Attachment is larger than 10MB.",IMAGE_NOT_SUPPORTED:"Image attachment is not supported.",FILE_NOT_SUPPORTED:"File attachment is not supported."},a=e.isFileWithinSizeLimit=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return!!(0,r.isValidFile)(t)&&t.size<1048576*e},s=e.isImageFile=function(t){return!!(0,r.isValidFile)(t)&&(0,o.includes)(t.type,"image")},u=e.isValidImageAttachment=function(t){if(!(0,r.isValidFile)(t)||!a(t))return!1;var e=["bmp","gif","jpeg","jpg","png"];return s(t)&&!!e.filter(function(e){return(0,o.includes)(t.type,e)}).length},c=e.isValidFileAttachment=function(t){return!(!(0,r.isValidFile)(t)||!a(t))&&!!["","pdf","text"].filter(function(e){return(0,o.includes)(t.type,e)}).length};e.validateAttachment=function(t){var e=[];return(0,r.isValidFile)(t)||e.push(i.INVALID),a(t)||e.push(i.TOO_LARGE),s(t)?u(t)||e.push(i.IMAGE_NOT_SUPPORTED):c(t)||e.push(i.FILE_NOT_SUPPORTED),e}},864:function(t,e){var n=function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var r=n(1);t.exports=r.default},function(t,e,n){"use strict";function r(t){if(null===t||void 0===t)throw"You must pass your app key when you instantiate Pusher."}var o=n(2),i=n(4),a=n(14),s=n(29),u=n(30),c=n(31),l=n(7),f=n(11),h=n(63),p=n(16),d=n(33),y=n(44),g=function(){function t(e,n){var l=this;if(r(e),n=n||{},!n.cluster&&!n.wsHost&&!n.httpHost){var g=y.default.buildLogSuffix("javascriptQuickStart");p.default.warn("You should always specify a cluster when connecting. "+g)}this.key=e,this.config=i.extend(h.getGlobalConfig(),n.cluster?h.getClusterConfig(n.cluster):{},n),this.channels=d.default.createChannels(),this.global_emitter=new a.default,this.sessionID=Math.floor(1e9*Math.random()),this.timeline=new s.default(this.key,this.sessionID,{cluster:this.config.cluster,features:t.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:u.default.INFO,version:f.default.VERSION}),this.config.disableStats||(this.timelineSender=d.default.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+o.default.TimelineTransport.name}));var v=function(t){var e=i.extend({},l.config,t);return c.build(o.default.getDefaultStrategy(e),e)};this.connection=d.default.createConnectionManager(this.key,i.extend({getStrategy:v,timeline:this.timeline,activityTimeout:this.config.activity_timeout,pongTimeout:this.config.pong_timeout,unavailableTimeout:this.config.unavailable_timeout},this.config,{useTLS:this.shouldUseTLS()})),this.connection.bind("connected",function(){l.subscribeAll(),l.timelineSender&&l.timelineSender.send(l.connection.isUsingTLS())}),this.connection.bind("message",function(t){var e=t.event,n=0===e.indexOf("pusher_internal:");if(t.channel){var r=l.channel(t.channel);r&&r.handleEvent(t)}n||l.global_emitter.emit(t.event,t.data)}),this.connection.bind("connecting",function(){l.channels.disconnect()}),this.connection.bind("disconnected",function(){l.channels.disconnect()}),this.connection.bind("error",function(t){p.default.warn("Error",t)}),t.instances.push(this),this.timeline.info({instances:t.instances.length}),t.isReady&&this.connect()}return t.ready=function(){t.isReady=!0;for(var e=0,n=t.instances.length;e<n;e++)t.instances[e].connect()},t.log=function(e){t.logToConsole&&self.console&&self.console.log&&self.console.log(e)},t.getClientFeatures=function(){return i.keys(i.filterObject({ws:o.default.Transports.ws},function(t){return t.isSupported({})}))},t.prototype.channel=function(t){return this.channels.find(t)},t.prototype.allChannels=function(){return this.channels.all()},t.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var t=this.connection.isUsingTLS(),e=this.timelineSender;this.timelineSenderTimer=new l.PeriodicTimer(6e4,function(){e.send(t)})}},t.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},t.prototype.bind=function(t,e,n){return this.global_emitter.bind(t,e,n),this},t.prototype.unbind=function(t,e,n){return this.global_emitter.unbind(t,e,n),this},t.prototype.bind_global=function(t){return this.global_emitter.bind_global(t),this},t.prototype.unbind_global=function(t){return this.global_emitter.unbind_global(t),this},t.prototype.unbind_all=function(t){return this.global_emitter.unbind_all(),this},t.prototype.subscribeAll=function(){var t;for(t in this.channels.channels)this.channels.channels.hasOwnProperty(t)&&this.subscribe(t)},t.prototype.subscribe=function(t){var e=this.channels.add(t,this);return e.subscriptionPending&&e.subscriptionCancelled?e.reinstateSubscription():e.subscriptionPending||"connected"!==this.connection.state||e.subscribe(),e},t.prototype.unsubscribe=function(t){var e=this.channels.find(t);e&&e.subscriptionPending?e.cancelSubscription():(e=this.channels.remove(t))&&"connected"===this.connection.state&&e.unsubscribe()},t.prototype.send_event=function(t,e,n){return this.connection.send_event(t,e,n)},t.prototype.shouldUseTLS=function(){return"https:"===o.default.getProtocol()||(!0===this.config.forceTLS||Boolean(this.config.encrypted))},t.instances=[],t.isReady=!1,t.logToConsole=!1,t.Runtime=o.default,t.ScriptReceivers=o.default.ScriptReceivers,t.DependenciesReceivers=o.default.DependenciesReceivers,t.auth_callbacks=o.default.auth_callbacks,t}();e.__esModule=!0,e.default=g,o.default.setup(g)},function(t,e,n){"use strict";var r=n(3),o=n(26),i=n(27),a=n(28),s=r.default.getDefaultStrategy,u=r.default.Transports,c=r.default.setup,l=r.default.getProtocol,f=r.default.isXHRSupported,h=r.default.getLocalStorage,p=r.default.createXHR,d=r.default.createWebSocket,y=r.default.addUnloadListener,g=r.default.removeUnloadListener,v=r.default.transportConnectionInitializer,m=r.default.createSocketRequest,b=r.default.HTTPFactory,_={getDefaultStrategy:s,Transports:u,setup:c,getProtocol:l,isXHRSupported:f,getLocalStorage:h,createXHR:p,createWebSocket:d,addUnloadListener:y,removeUnloadListener:g,transportConnectionInitializer:v,createSocketRequest:m,HTTPFactory:b,TimelineTransport:a.default,getAuthorizers:function(){return{ajax:i.default}},getWebSocketAPI:function(){return WebSocket},getXHRAPI:function(){return XMLHttpRequest},getNetwork:function(){return o.Network}};e.__esModule=!0,e.default=_},function(t,e,n){"use strict";var r=n(4),o=n(9),i=n(17),a=n(18),s=n(19),u={getDefaultStrategy:i.default,Transports:o.default,transportConnectionInitializer:a.default,HTTPFactory:s.default,setup:function(t){t.ready()},getLocalStorage:function(){},getClientFeatures:function(){return r.keys(r.filterObject({ws:o.default.ws},function(t){return t.isSupported({})}))},getProtocol:function(){return"http:"},isXHRSupported:function(){return!0},createSocketRequest:function(t,e){if(this.isXHRSupported())return this.HTTPFactory.createXHR(t,e);throw"Cross-origin HTTP requests are not supported"},createXHR:function(){return new(this.getXHRAPI())},createWebSocket:function(t){return new(this.getWebSocketAPI())(t)},addUnloadListener:function(t){},removeUnloadListener:function(t){}};e.__esModule=!0,e.default=u},function(t,e,n){"use strict";function r(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var o=0;o<e.length;o++){var i=e[o];for(var a in i)i[a]&&i[a].constructor&&i[a].constructor===Object?t[a]=r(t[a]||{},i[a]):t[a]=i[a]}return t}function o(){for(var t=["Pusher"],e=0;e<arguments.length;e++)"string"===typeof arguments[e]?t.push(arguments[e]):t.push(_(arguments[e]));return t.join(" : ")}function i(t,e){var n=Array.prototype.indexOf;if(null===t)return-1;if(n&&t.indexOf===n)return t.indexOf(e);for(var r=0,o=t.length;r<o;r++)if(t[r]===e)return r;return-1}function a(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(t[n],n,t)}function s(t){var e=[];return a(t,function(t,n){e.push(n)}),e}function u(t){var e=[];return a(t,function(t){e.push(t)}),e}function c(t,e,n){for(var r=0;r<t.length;r++)e.call(n||self,t[r],r,t)}function l(t,e){for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r,t,n));return n}function f(t,e){var n={};return a(t,function(t,r){n[r]=e(t)}),n}function h(t,e){e=e||function(t){return!!t};for(var n=[],r=0;r<t.length;r++)e(t[r],r,t,n)&&n.push(t[r]);return n}function p(t,e){var n={};return a(t,function(r,o){(e&&e(r,o,t,n)||Boolean(r))&&(n[o]=r)}),n}function d(t){var e=[];return a(t,function(t,n){e.push([n,t])}),e}function y(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1}function g(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n,t))return!1;return!0}function v(t){return f(t,function(t){return"object"===typeof t&&(t=_(t)),encodeURIComponent(w.default(t.toString()))})}function m(t){return l(d(v(p(t,function(t){return void 0!==t}))),E.default.method("join","=")).join("&")}function b(t){var e=[],n=[];return function t(r,o){var i,a,s;switch(typeof r){case"object":if(!r)return null;for(i=0;i<e.length;i+=1)if(e[i]===r)return{$ref:n[i]};if(e.push(r),n.push(o),"[object Array]"===Object.prototype.toString.apply(r))for(s=[],i=0;i<r.length;i+=1)s[i]=t(r[i],o+"["+i+"]");else{s={};for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=t(r[a],o+"["+JSON.stringify(a)+"]"))}return s;case"number":case"string":case"boolean":return r}}(t,"$")}function _(t){try{return JSON.stringify(t)}catch(e){return JSON.stringify(b(t))}}var w=n(5),E=n(6);e.extend=r,e.stringify=o,e.arrayIndexOf=i,e.objectApply=a,e.keys=s,e.values=u,e.apply=c,e.map=l,e.mapObject=f,e.filter=h,e.filterObject=p,e.flatten=d,e.any=y,e.all=g,e.encodeParamsObject=v,e.buildQueryString=m,e.decycleObject=b,e.safeJSONStringify=_},function(t,e,n){"use strict";function r(t){return h(l(t))}e.__esModule=!0,e.default=r;for(var o=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a={},s=0,u=i.length;s<u;s++)a[i.charAt(s)]=s;var c=function(t){var e=t.charCodeAt(0);return e<128?t:e<2048?o(192|e>>>6)+o(128|63&e):o(224|e>>>12&15)+o(128|e>>>6&63)+o(128|63&e)},l=function(t){return t.replace(/[^\x00-\x7F]/g,c)},f=function(t){var e=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[i.charAt(n>>>18),i.charAt(n>>>12&63),e>=2?"=":i.charAt(n>>>6&63),e>=1?"=":i.charAt(63&n)].join("")},h=self.btoa||function(t){return t.replace(/[\s\S]{1,3}/g,f)}},function(t,e,n){"use strict";var r=n(7),o={now:function(){return Date.now?Date.now():(new Date).valueOf()},defer:function(t){return new r.OneOffTimer(0,t)},method:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Array.prototype.slice.call(arguments,1);return function(e){return e[t].apply(e,r.concat(arguments))}}};e.__esModule=!0,e.default=o},function(t,e,n){"use strict";function r(t){self.clearTimeout(t)}function o(t){self.clearInterval(t)}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},a=n(8),s=function(t){function e(e,n){t.call(this,setTimeout,r,e,function(t){return n(),null})}return i(e,t),e}(a.default);e.OneOffTimer=s;var u=function(t){function e(e,n){t.call(this,setInterval,o,e,function(t){return n(),t})}return i(e,t),e}(a.default);e.PeriodicTimer=u},function(t,e){"use strict";var n=function(){function t(t,e,n,r){var o=this;this.clear=e,this.timer=t(function(){o.timer&&(o.timer=r(o.timer))},n)}return t.prototype.isRunning=function(){return null!==this.timer},t.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},t}();e.__esModule=!0,e.default=n},function(t,e,n){"use strict";var r=n(10),o=n(12),i=n(4),a=n(2),s=new o.default({urls:r.ws,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(a.default.getWebSocketAPI())},isSupported:function(){return Boolean(a.default.getWebSocketAPI())},getSocket:function(t){return a.default.createWebSocket(t)}}),u={urls:r.http,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}};e.streamingConfiguration=i.extend({getSocket:function(t){return a.default.HTTPFactory.createStreamingSocket(t)}},u),e.pollingConfiguration=i.extend({getSocket:function(t){return a.default.HTTPFactory.createPollingSocket(t)}},u);var c={isSupported:function(){return a.default.isXHRSupported()}},l=new o.default(i.extend({},e.streamingConfiguration,c)),f=new o.default(i.extend({},e.pollingConfiguration,c)),h={ws:s,xhr_streaming:l,xhr_polling:f};e.__esModule=!0,e.default=h},function(t,e,n){"use strict";function r(t,e,n){return t+(e.useTLS?"s":"")+"://"+(e.useTLS?e.hostTLS:e.hostNonTLS)+n}function o(t,e){return"/app/"+t+"?protocol="+i.default.PROTOCOL+"&client=js&version="+i.default.VERSION+(e?"&"+e:"")}var i=n(11);e.ws={getInitial:function(t,e){return r("ws",e,(e.httpPath||"")+o(t,"flash=false"))}},e.http={getInitial:function(t,e){return r("http",e,(e.httpPath||"/pusher")+o(t))}},e.sockjs={getInitial:function(t,e){return r("http",e,e.httpPath||"/pusher")},getPath:function(t,e){return o(t)}}},function(t,e){"use strict";var n={VERSION:"4.4.0",PROTOCOL:7,host:"ws.pusherapp.com",ws_port:80,wss_port:443,ws_path:"",sockjs_host:"sockjs.pusher.com",sockjs_http_port:80,sockjs_https_port:443,sockjs_path:"/pusher",stats_host:"stats.pusher.com",channel_auth_endpoint:"/pusher/auth",channel_auth_transport:"ajax",activity_timeout:12e4,pong_timeout:3e4,unavailable_timeout:1e4,cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""};e.__esModule=!0,e.default=n},function(t,e,n){"use strict";var r=n(13),o=function(){function t(t){this.hooks=t}return t.prototype.isSupported=function(t){return this.hooks.isSupported(t)},t.prototype.createConnection=function(t,e,n,o){return new r.default(this.hooks,t,e,n,o)},t}();e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(6),i=n(4),a=n(14),s=n(16),u=n(2),c=function(t){function e(e,n,r,o,i){t.call(this),this.initialize=u.default.transportConnectionInitializer,this.hooks=e,this.name=n,this.priority=r,this.key=o,this.options=i,this.state="new",this.timeline=i.timeline,this.activityTimeout=i.activityTimeout,this.id=this.timeline.generateUniqueID()}return r(e,t),e.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},e.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},e.prototype.connect=function(){var t=this;if(this.socket||"initialized"!==this.state)return!1;var e=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(e,this.options)}catch(e){return o.default.defer(function(){t.onError(e),t.changeState("closed")}),!1}return this.bindListeners(),s.default.debug("Connecting",{transport:this.name,url:e}),this.changeState("connecting"),!0},e.prototype.close=function(){return!!this.socket&&(this.socket.close(),!0)},e.prototype.send=function(t){var e=this;return"open"===this.state&&(o.default.defer(function(){e.socket&&e.socket.send(t)}),!0)},e.prototype.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()},e.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},e.prototype.onError=function(t){this.emit("error",{type:"WebSocketError",error:t}),this.timeline.error(this.buildTimelineMessage({error:t.toString()}))},e.prototype.onClose=function(t){t?this.changeState("closed",{code:t.code,reason:t.reason,wasClean:t.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},e.prototype.onMessage=function(t){this.emit("message",t)},e.prototype.onActivity=function(){this.emit("activity")},e.prototype.bindListeners=function(){var t=this;this.socket.onopen=function(){t.onOpen()},this.socket.onerror=function(e){t.onError(e)},this.socket.onclose=function(e){t.onClose(e)},this.socket.onmessage=function(e){t.onMessage(e)},this.supportsPing()&&(this.socket.onactivity=function(){t.onActivity()})},e.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},e.prototype.changeState=function(t,e){this.state=t,this.timeline.info(this.buildTimelineMessage({state:t,params:e})),this.emit(t,e)},e.prototype.buildTimelineMessage=function(t){return i.extend({cid:this.id},t)},e}(a.default);e.__esModule=!0,e.default=c},function(t,e,n){"use strict";var r=n(4),o=n(15),i=function(){function t(t){this.callbacks=new o.default,this.global_callbacks=[],this.failThrough=t}return t.prototype.bind=function(t,e,n){return this.callbacks.add(t,e,n),this},t.prototype.bind_global=function(t){return this.global_callbacks.push(t),this},t.prototype.unbind=function(t,e,n){return this.callbacks.remove(t,e,n),this},t.prototype.unbind_global=function(t){return t?(this.global_callbacks=r.filter(this.global_callbacks||[],function(e){return e!==t}),this):(this.global_callbacks=[],this)},t.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},t.prototype.emit=function(t,e,n){for(var r=0;r<this.global_callbacks.length;r++)this.global_callbacks[r](t,e);var o=this.callbacks.get(t),i=[];if(n?i.push(e,n):e&&i.push(e),o&&o.length>0)for(var r=0;r<o.length;r++)o[r].fn.apply(o[r].context||self,i);else this.failThrough&&this.failThrough(t,e);return this},t}();e.__esModule=!0,e.default=i},function(t,e,n){"use strict";function r(t){return"_"+t}var o=n(4),i=function(){function t(){this._callbacks={}}return t.prototype.get=function(t){return this._callbacks[r(t)]},t.prototype.add=function(t,e,n){var o=r(t);this._callbacks[o]=this._callbacks[o]||[],this._callbacks[o].push({fn:e,context:n})},t.prototype.remove=function(t,e,n){if(!t&&!e&&!n)return void(this._callbacks={});var i=t?[r(t)]:o.keys(this._callbacks);e||n?this.removeCallback(i,e,n):this.removeAllCallbacks(i)},t.prototype.removeCallback=function(t,e,n){o.apply(t,function(t){this._callbacks[t]=o.filter(this._callbacks[t]||[],function(t){return e&&e!==t.fn||n&&n!==t.context}),0===this._callbacks[t].length&&delete this._callbacks[t]},this)},t.prototype.removeAllCallbacks=function(t){o.apply(t,function(t){delete this._callbacks[t]},this)},t}();e.__esModule=!0,e.default=i},function(t,e,n){"use strict";var r=n(4),o=n(1),i={debug:function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];o.default.log&&o.default.log(r.stringify.apply(this,arguments))},warn:function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=r.stringify.apply(this,arguments);o.default.log?o.default.log(n):self.console&&(self.console.warn?self.console.warn(n):self.console.log&&self.console.log(n))}};e.__esModule=!0,e.default=i},function(t,e){"use strict";var n=function(t){var e;return e=t.useTLS?[":best_connected_ever",":ws_loop",[":delayed",2e3,[":http_loop"]]]:[":best_connected_ever",":ws_loop",[":delayed",2e3,[":wss_loop"]],[":delayed",5e3,[":http_loop"]]],[[":def","ws_options",{hostNonTLS:t.wsHost+":"+t.wsPort,hostTLS:t.wsHost+":"+t.wssPort,httpPath:t.wsPath}],[":def","wss_options",[":extend",":ws_options",{useTLS:!0}]],[":def","http_options",{hostNonTLS:t.httpHost+":"+t.httpPort,hostTLS:t.httpHost+":"+t.httpsPort,httpPath:t.httpPath}],[":def","timeouts",{loop:!0,timeout:15e3,timeoutLimit:6e4}],[":def","ws_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:t.activity_timeout}]],[":def","streaming_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:t.activity_timeout}]],[":def_transport","ws","ws",3,":ws_options",":ws_manager"],[":def_transport","wss","ws",3,":wss_options",":ws_manager"],[":def_transport","xhr_streaming","xhr_streaming",1,":http_options",":streaming_manager"],[":def_transport","xhr_polling","xhr_polling",1,":http_options"],[":def","ws_loop",[":sequential",":timeouts",":ws"]],[":def","wss_loop",[":sequential",":timeouts",":wss"]],[":def","streaming_loop",[":sequential",":timeouts",":xhr_streaming"]],[":def","polling_loop",[":sequential",":timeouts",":xhr_polling"]],[":def","http_loop",[":if",[":is_supported",":streaming_loop"],[":best_connected_ever",":streaming_loop",[":delayed",4e3,[":polling_loop"]]],[":polling_loop"]]],[":def","strategy",[":cached",18e5,[":first_connected",[":if",[":is_supported",":ws"],e,":http_loop"]]]]]};e.__esModule=!0,e.default=n},function(t,e){"use strict";function n(){var t=this;t.timeline.info(t.buildTimelineMessage({transport:t.name+(t.options.useTLS?"s":"")})),t.hooks.isInitialized()?t.changeState("initialized"):t.onClose()}e.__esModule=!0,e.default=n},function(t,e,n){"use strict";var r=n(20),o=n(21),i=n(23),a=n(24),s=n(25),u={createStreamingSocket:function(t){return this.createSocket(i.default,t)},createPollingSocket:function(t){return this.createSocket(a.default,t)},createSocket:function(t,e){return new o.default(t,e)},createXHR:function(t,e){return this.createRequest(s.default,t,e)},createRequest:function(t,e,n){return new r.default(t,e,n)}};e.__esModule=!0,e.default=u},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(2),i=n(14),a=function(t){function e(e,n,r){t.call(this),this.hooks=e,this.method=n,this.url=r}return r(e,t),e.prototype.start=function(t){var e=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){e.close()},o.default.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(t)},e.prototype.close=function(){this.unloader&&(o.default.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},e.prototype.onChunk=function(t,e){for(;;){var n=this.advanceBuffer(e);if(!n)break;this.emit("chunk",{status:t,data:n})}this.isBufferTooLong(e)&&this.emit("buffer_too_long")},e.prototype.advanceBuffer=function(t){var e=t.slice(this.position),n=e.indexOf("\n");return-1!==n?(this.position+=n+1,e.slice(0,n)):null},e.prototype.isBufferTooLong=function(t){return this.position===t.length&&t.length>262144},e}(i.default);e.__esModule=!0,e.default=a},function(t,e,n){"use strict";function r(t){var e=/([^\?]*)\/*(\??.*)/.exec(t);return{base:e[1],queryString:e[2]}}function o(t,e){return t.base+"/"+e+"/xhr_send"}function i(t){return t+(-1===t.indexOf("?")?"?":"&")+"t="+ +new Date+"&n="+h++}function a(t,e){var n=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(t);return n[1]+e+n[3]}function s(t){return Math.floor(Math.random()*t)}function u(t){for(var e=[],n=0;n<t;n++)e.push(s(32).toString(32));return e.join("")}var c=n(22),l=n(6),f=n(2),h=1,p=function(){function t(t,e){this.hooks=t,this.session=s(1e3)+"/"+u(8),this.location=r(e),this.readyState=c.default.CONNECTING,this.openStream()}return t.prototype.send=function(t){return this.sendRaw(JSON.stringify([t]))},t.prototype.ping=function(){this.hooks.sendHeartbeat(this)},t.prototype.close=function(t,e){this.onClose(t,e,!0)},t.prototype.sendRaw=function(t){if(this.readyState!==c.default.OPEN)return!1;try{return f.default.createSocketRequest("POST",i(o(this.location,this.session))).start(t),!0}catch(t){return!1}},t.prototype.reconnect=function(){this.closeStream(),this.openStream()},t.prototype.onClose=function(t,e,n){this.closeStream(),this.readyState=c.default.CLOSED,this.onclose&&this.onclose({code:t,reason:e,wasClean:n})},t.prototype.onChunk=function(t){if(200===t.status){this.readyState===c.default.OPEN&&this.onActivity();var e;switch(t.data.slice(0,1)){case"o":e=JSON.parse(t.data.slice(1)||"{}"),this.onOpen(e);break;case"a":e=JSON.parse(t.data.slice(1)||"[]");for(var n=0;n<e.length;n++)this.onEvent(e[n]);break;case"m":e=JSON.parse(t.data.slice(1)||"null"),this.onEvent(e);break;case"h":this.hooks.onHeartbeat(this);break;case"c":e=JSON.parse(t.data.slice(1)||"[]"),this.onClose(e[0],e[1],!0)}}},t.prototype.onOpen=function(t){this.readyState===c.default.CONNECTING?(t&&t.hostname&&(this.location.base=a(this.location.base,t.hostname)),this.readyState=c.default.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},t.prototype.onEvent=function(t){this.readyState===c.default.OPEN&&this.onmessage&&this.onmessage({data:t})},t.prototype.onActivity=function(){this.onactivity&&this.onactivity()},t.prototype.onError=function(t){this.onerror&&this.onerror(t)},t.prototype.openStream=function(){var t=this;this.stream=f.default.createSocketRequest("POST",i(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",function(e){t.onChunk(e)}),this.stream.bind("finished",function(e){t.hooks.onFinished(t,e)}),this.stream.bind("buffer_too_long",function(){t.reconnect()});try{this.stream.start()}catch(e){l.default.defer(function(){t.onError(e),t.onClose(1006,"Could not start streaming",!1)})}},t.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},t}();e.__esModule=!0,e.default=p},function(t,e){"use strict";var n;!function(t){t[t.CONNECTING=0]="CONNECTING",t[t.OPEN=1]="OPEN",t[t.CLOSED=3]="CLOSED"}(n||(n={})),e.__esModule=!0,e.default=n},function(t,e){"use strict";var n={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr_streaming"+t.queryString},onHeartbeat:function(t){t.sendRaw("[]")},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){t.onClose(1006,"Connection interrupted ("+e+")",!1)}};e.__esModule=!0,e.default=n},function(t,e){"use strict";var n={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr"+t.queryString},onHeartbeat:function(){},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){200===e?t.reconnect():t.onClose(1006,"Connection interrupted ("+e+")",!1)}};e.__esModule=!0,e.default=n},function(t,e,n){"use strict";var r=n(2),o={getRequest:function(t){var e=r.default.getXHRAPI(),n=new e;return n.onreadystatechange=n.onprogress=function(){switch(n.readyState){case 3:n.responseText&&n.responseText.length>0&&t.onChunk(n.status,n.responseText);break;case 4:n.responseText&&n.responseText.length>0&&t.onChunk(n.status,n.responseText),t.emit("finished",n.status),t.close()}},n},abortRequest:function(t){t.onreadystatechange=null,t.abort()}};e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(14),i=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.isOnline=function(){return!0},e}(o.default);e.NetInfo=i,e.Network=new i},function(t,e,n){"use strict";var r=n(16),o=function(t,e,n){var o=new Headers;o.set("Content-Type","application/x-www-form-urlencoded");for(var i in this.authOptions.headers)o.set(i,this.authOptions.headers[i]);var a=this.composeQuery(e),s=new Request(this.options.authEndpoint,{headers:o,body:a,credentials:"same-origin",method:"POST"});return fetch(s).then(function(t){var e=t.status;if(200===e)return t.text();throw r.default.warn("Couldn't get auth info from your webapp",e),e}).then(function(t){try{t=JSON.parse(t)}catch(n){var e="JSON returned from webapp was invalid, yet status code was 200. Data was: "+t;throw r.default.warn(e),e}n(!1,t)}).catch(function(t){n(!0,t)})};e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var r=n(16),o=n(4),i=function(t,e){return function(n,i){var a="http"+(e?"s":"")+"://",s=a+(t.host||t.options.host)+t.options.path;s+="/2?"+o.buildQueryString(n),fetch(s).then(function(t){if(200!==t.status)throw"received "+t.status+" from stats.pusher.com";return t.json()}).then(function(e){var n=e.host;n&&(t.host=n)}).catch(function(t){r.default.debug("TimelineSender Error: ",t)})}},a={name:"xhr",getAgent:i};e.__esModule=!0,e.default=a},function(t,e,n){"use strict";var r=n(4),o=n(6),i=n(30),a=function(){function t(t,e,n){this.key=t,this.session=e,this.events=[],this.options=n||{},this.sent=0,this.uniqueID=0}return t.prototype.log=function(t,e){t<=this.options.level&&(this.events.push(r.extend({},e,{timestamp:o.default.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},t.prototype.error=function(t){this.log(i.default.ERROR,t)},t.prototype.info=function(t){this.log(i.default.INFO,t)},t.prototype.debug=function(t){this.log(i.default.DEBUG,t)},t.prototype.isEmpty=function(){return 0===this.events.length},t.prototype.send=function(t,e){var n=this,o=r.extend({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],t(o,function(t,r){t||n.sent++,e&&e(t,r)}),!0},t.prototype.generateUniqueID=function(){return++this.uniqueID},t}();e.__esModule=!0,e.default=a},function(t,e){"use strict";var n;!function(t){t[t.ERROR=3]="ERROR",t[t.INFO=6]="INFO",t[t.DEBUG=7]="DEBUG"}(n||(n={})),e.__esModule=!0,e.default=n},function(t,e,n){"use strict";function r(t){return function(e){return[t.apply(this,arguments),e]}}function o(t){return"string"===typeof t&&":"===t.charAt(0)}function i(t,e){return e[t.slice(1)]}function a(t,e){if(0===t.length)return[[],e];var n=c(t[0],e),r=a(t.slice(1),n[1]);return[[n[0]].concat(r[0]),r[1]]}function s(t,e){if(!o(t))return[t,e];var n=i(t,e);if(void 0===n)throw"Undefined symbol "+t;return[n,e]}function u(t,e){if(o(t[0])){var n=i(t[0],e);if(t.length>1){if("function"!==typeof n)throw"Calling non-function "+t[0];var r=[l.extend({},e)].concat(l.map(t.slice(1),function(t){return c(t,l.extend({},e))[0]}));return n.apply(this,r)}return[n,e]}return a(t,e)}function c(t,e){return"string"===typeof t?s(t,e):"object"===typeof t&&t instanceof Array&&t.length>0?u(t,e):[t,e]}var l=n(4),f=n(6),h=n(32),p=n(43),d=n(56),y=n(57),g=n(58),v=n(59),m=n(60),b=n(61),_=n(62),w=n(2),E=w.default.Transports;e.build=function(t,e){return c(t,l.extend({},O,e))[1].strategy};var S={isSupported:function(){return!1},connect:function(t,e){var n=f.default.defer(function(){e(new p.UnsupportedStrategy)});return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}},O={extend:function(t,e,n){return[l.extend({},e,n),t]},def:function(t,e,n){if(void 0!==t[e])throw"Redefining symbol "+e;return t[e]=n,[void 0,t]},def_transport:function(t,e,n,r,o,i){var a=E[n];if(!a)throw new p.UnsupportedTransport(n);var s,u=(!t.enabledTransports||-1!==l.arrayIndexOf(t.enabledTransports,e))&&(!t.disabledTransports||-1===l.arrayIndexOf(t.disabledTransports,e));s=u?new d.default(e,r,i?i.getAssistant(a):a,l.extend({key:t.key,useTLS:t.useTLS,timeline:t.timeline,ignoreNullOrigin:t.ignoreNullOrigin},o)):S;var c=t.def(t,e,s)[1];return c.Transports=t.Transports||{},c.Transports[e]=s,[void 0,c]},transport_manager:r(function(t,e){return new h.default(e)}),sequential:r(function(t,e){var n=Array.prototype.slice.call(arguments,2);return new y.default(n,e)}),cached:r(function(t,e,n){return new v.default(n,t.Transports,{ttl:e,timeline:t.timeline,useTLS:t.useTLS})}),first_connected:r(function(t,e){return new _.default(e)}),best_connected_ever:r(function(){var t=Array.prototype.slice.call(arguments,1);return new g.default(t)}),delayed:r(function(t,e,n){return new m.default(n,{delay:e})}),if:r(function(t,e,n,r){return new b.default(e,n,r)}),is_supported:r(function(t,e){return function(){return e.isSupported()}})}},function(t,e,n){"use strict";var r=n(33),o=function(){function t(t){this.options=t||{},this.livesLeft=this.options.lives||1/0}return t.prototype.getAssistant=function(t){return r.default.createAssistantToTheTransportManager(this,t,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},t.prototype.isAlive=function(){return this.livesLeft>0},t.prototype.reportDeath=function(){this.livesLeft-=1},t}();e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var r=n(34),o=n(35),i=n(38),a=n(39),s=n(40),u=n(41),c=n(46),l=n(42),f=n(54),h=n(55),p={createChannels:function(){return new h.default},createConnectionManager:function(t,e){return new f.default(t,e)},createChannel:function(t,e){return new l.default(t,e)},createPrivateChannel:function(t,e){return new u.default(t,e)},createPresenceChannel:function(t,e){return new s.default(t,e)},createEncryptedChannel:function(t,e){return new c.default(t,e)},createTimelineSender:function(t,e){return new a.default(t,e)},createAuthorizer:function(t,e){return e.authorizer?e.authorizer(t,e):new i.default(t,e)},createHandshake:function(t,e){return new o.default(t,e)},createAssistantToTheTransportManager:function(t,e,n){return new r.default(t,e,n)}};e.__esModule=!0,e.default=p},function(t,e,n){"use strict";var r=n(6),o=n(4),i=function(){function t(t,e,n){this.manager=t,this.transport=e,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=void 0}return t.prototype.createConnection=function(t,e,n,i){var a=this;i=o.extend({},i,{activityTimeout:this.pingDelay});var s=this.transport.createConnection(t,e,n,i),u=null,c=function(){s.unbind("open",c),s.bind("closed",l),u=r.default.now()},l=function(t){if(s.unbind("closed",l),1002===t.code||1003===t.code)a.manager.reportDeath();else if(!t.wasClean&&u){var e=r.default.now()-u;e<2*a.maxPingDelay&&(a.manager.reportDeath(),a.pingDelay=Math.max(e/2,a.minPingDelay))}};return s.bind("open",c),s},t.prototype.isSupported=function(t){return this.manager.isAlive()&&this.transport.isSupported(t)},t}();e.__esModule=!0,e.default=i},function(t,e,n){"use strict";var r=n(4),o=n(36),i=n(37),a=function(){function t(t,e){this.transport=t,this.callback=e,this.bindListeners()}return t.prototype.close=function(){this.unbindListeners(),this.transport.close()},t.prototype.bindListeners=function(){var t=this;this.onMessage=function(e){t.unbindListeners();var n;try{n=o.processHandshake(e)}catch(e){return t.finish("error",{error:e}),void t.transport.close()}"connected"===n.action?t.finish("connected",{connection:new i.default(n.id,t.transport),activityTimeout:n.activityTimeout}):(t.finish(n.action,{error:n.error}),t.transport.close())},this.onClosed=function(e){t.unbindListeners();var n=o.getCloseAction(e)||"backoff",r=o.getCloseError(e);t.finish(n,{error:r})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},t.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},t.prototype.finish=function(t,e){this.callback(r.extend({transport:this.transport,action:t},e))},t}();e.__esModule=!0,e.default=a},function(t,e){"use strict";e.decodeMessage=function(t){try{var e=JSON.parse(t.data),n=e.data;if("string"===typeof n)try{n=JSON.parse(e.data)}catch(t){}var r={event:e.event,channel:e.channel,data:n};return e.user_id&&(r.user_id=e.user_id),r}catch(e){throw{type:"MessageParseError",error:e,data:t.data}}},e.encodeMessage=function(t){return JSON.stringify(t)},e.processHandshake=function(t){var n=e.decodeMessage(t);if("pusher:connection_established"===n.event){if(!n.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:n.data.socket_id,activityTimeout:1e3*n.data.activity_timeout}}if("pusher:error"===n.event)return{action:this.getCloseAction(n.data),error:this.getCloseError(n.data)};throw"Invalid handshake"},e.getCloseAction=function(t){return t.code<4e3?t.code>=1002&&t.code<=1004?"backoff":null:4e3===t.code?"tls_only":t.code<4100?"refused":t.code<4200?"backoff":t.code<4300?"retry":"refused"},e.getCloseError=function(t){return 1e3!==t.code&&1001!==t.code?{type:"PusherError",data:{code:t.code,message:t.reason||t.message}}:null}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(4),i=n(14),a=n(36),s=n(16),u=function(t){function e(e,n){t.call(this),this.id=e,this.transport=n,this.activityTimeout=n.activityTimeout,this.bindListeners()}return r(e,t),e.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},e.prototype.send=function(t){return this.transport.send(t)},e.prototype.send_event=function(t,e,n){var r={event:t,data:e};return n&&(r.channel=n),s.default.debug("Event sent",r),this.send(a.encodeMessage(r))},e.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},e.prototype.close=function(){this.transport.close()},e.prototype.bindListeners=function(){var t=this,e={message:function(e){var n;try{n=a.decodeMessage(e)}catch(n){t.emit("error",{type:"MessageParseError",error:n,data:e.data})}if(void 0!==n){switch(s.default.debug("Event recd",n),n.event){case"pusher:error":t.emit("error",{type:"PusherError",data:n.data});break;case"pusher:ping":t.emit("ping");break;case"pusher:pong":t.emit("pong")}t.emit("message",n)}},activity:function(){t.emit("activity")},error:function(e){t.emit("error",{type:"WebSocketError",error:e})},closed:function(e){n(),e&&e.code&&t.handleCloseEvent(e),t.transport=null,t.emit("closed")}},n=function(){o.objectApply(e,function(e,n){t.transport.unbind(n,e)})};o.objectApply(e,function(e,n){t.transport.bind(n,e)})},e.prototype.handleCloseEvent=function(t){var e=a.getCloseAction(t),n=a.getCloseError(t);n&&this.emit("error",n),e&&this.emit(e,{action:e,error:n})},e}(i.default);e.__esModule=!0,e.default=u},function(t,e,n){"use strict";var r=n(2),o=function(){function t(t,e){this.channel=t;var n=e.authTransport;if("undefined"===typeof r.default.getAuthorizers()[n])throw"'"+n+"' is not a recognized auth transport";this.type=n,this.options=e,this.authOptions=(e||{}).auth||{}}return t.prototype.composeQuery=function(t){var e="socket_id="+encodeURIComponent(t)+"&channel_name="+encodeURIComponent(this.channel.name);for(var n in this.authOptions.params)e+="&"+encodeURIComponent(n)+"="+encodeURIComponent(this.authOptions.params[n]);return e},t.prototype.authorize=function(e,n){return t.authorizers=t.authorizers||r.default.getAuthorizers(),t.authorizers[this.type].call(this,r.default,e,n)},t}();e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var r=n(2),o=function(){function t(t,e){this.timeline=t,this.options=e||{}}return t.prototype.send=function(t,e){this.timeline.isEmpty()||this.timeline.send(r.default.TimelineTransport.getAgent(this,t),e)},t}();e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(41),i=n(16),a=n(45),s=n(44),u=function(t){function e(e,n){t.call(this,e,n),this.members=new a.default}return r(e,t),e.prototype.authorize=function(e,n){var r=this;t.prototype.authorize.call(this,e,function(t,e){if(!t){if(void 0===e.channel_data){var o=s.default.buildLogSuffix("authenticationEndpoint");return i.default.warn("Invalid auth response for channel '"+r.name+"',expected 'channel_data' field. "+o),void n("Invalid auth response")}var a=JSON.parse(e.channel_data);r.members.setMyID(a.user_id)}n(t,e)})},e.prototype.handleEvent=function(t){var e=t.event;if(0===e.indexOf("pusher_internal:"))this.handleInternalEvent(t);else{var n=t.data,r={};t.user_id&&(r.user_id=t.user_id),this.emit(e,n,r)}},e.prototype.handleInternalEvent=function(t){var e=t.event,n=t.data;switch(e){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(t);break;case"pusher_internal:member_added":var r=this.members.addMember(n);this.emit("pusher:member_added",r);break;case"pusher_internal:member_removed":var o=this.members.removeMember(n);o&&this.emit("pusher:member_removed",o)}},e.prototype.handleSubscriptionSucceededEvent=function(t){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(t.data),this.emit("pusher:subscription_succeeded",this.members))},e.prototype.disconnect=function(){this.members.reset(),t.prototype.disconnect.call(this)},e}(o.default);e.__esModule=!0,e.default=u},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(33),i=n(42),a=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.authorize=function(t,e){return o.default.createAuthorizer(this,this.pusher.config).authorize(t,e)},e}(i.default);e.__esModule=!0,e.default=a},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(14),i=n(43),a=n(16),s=n(44),u=function(t){function e(e,n){t.call(this,function(t,n){a.default.debug("No callbacks on "+e+" for "+t)}),this.name=e,this.pusher=n,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}return r(e,t),e.prototype.authorize=function(t,e){return e(!1,{})},e.prototype.trigger=function(t,e){if(0!==t.indexOf("client-"))throw new i.BadEventName("Event '"+t+"' does not start with 'client-'");if(!this.subscribed){var n=s.default.buildLogSuffix("triggeringClientEvents");a.default.warn("Client event triggered before channel 'subscription_succeeded' event . "+n)}return this.pusher.send_event(t,e,this.name)},e.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},e.prototype.handleEvent=function(t){var e=t.event,n=t.data;if("pusher_internal:subscription_succeeded"===e)this.handleSubscriptionSucceededEvent(t);else if(0!==e.indexOf("pusher_internal:")){var r={};this.emit(e,n,r)}},e.prototype.handleSubscriptionSucceededEvent=function(t){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",t.data)},e.prototype.subscribe=function(){var t=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,function(e,n){e?t.emit("pusher:subscription_error",n):t.pusher.send_event("pusher:subscribe",{auth:n.auth,channel_data:n.channel_data,channel:t.name})}))},e.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},e.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},e.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},e}(o.default);e.__esModule=!0,e.default=u},function(t,e){"use strict";var n=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.BadEventName=r;var o=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.RequestTimedOut=o;var i=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.TransportPriorityTooLow=i;var a=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.TransportClosed=a;var s=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.UnsupportedFeature=s;var u=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.UnsupportedTransport=u;var c=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.UnsupportedStrategy=c},function(t,e){"use strict";var n={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/authenticating_users"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"}}},r=function(t){var e=n.urls[t];if(!e)return"";var r;return e.fullUrl?r=e.fullUrl:e.path&&(r=n.baseUrl+e.path),r?"See: "+r:""};e.__esModule=!0,e.default={buildLogSuffix:r}},function(t,e,n){"use strict";var r=n(4),o=function(){function t(){this.reset()}return t.prototype.get=function(t){return Object.prototype.hasOwnProperty.call(this.members,t)?{id:t,info:this.members[t]}:null},t.prototype.each=function(t){var e=this;r.objectApply(this.members,function(n,r){t(e.get(r))})},t.prototype.setMyID=function(t){this.myID=t},t.prototype.onSubscription=function(t){this.members=t.presence.hash,this.count=t.presence.count,this.me=this.get(this.myID)},t.prototype.addMember=function(t){return null===this.get(t.user_id)&&this.count++,this.members[t.user_id]=t.user_info,this.get(t.user_id)},t.prototype.removeMember=function(t){var e=this.get(t.user_id);return e&&(delete this.members[t.user_id],this.count--),e},t.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},t}();e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(41),i=n(43),a=n(16),s=n(47),u=n(49),c=function(t){function e(){t.apply(this,arguments),this.key=null}return r(e,t),e.prototype.authorize=function(e,n){var r=this;t.prototype.authorize.call(this,e,function(t,e){if(t)return void n(!0,e);var o=e.shared_secret;if(!o){var i="No shared_secret key in auth payload for encrypted channel: "+r.name;return n(!0,i),void a.default.warn("Error: "+i)}r.key=u.decodeBase64(o),delete e.shared_secret,n(!1,e)})},e.prototype.trigger=function(t,e){throw new i.UnsupportedFeature("Client events are not currently supported for encrypted channels")},e.prototype.handleEvent=function(e){var n=e.event,r=e.data;if(0===n.indexOf("pusher_internal:")||0===n.indexOf("pusher:"))return void t.prototype.handleEvent.call(this,e);this.handleEncryptedEvent(n,r)},e.prototype.handleEncryptedEvent=function(t,e){var n=this;if(!this.key)return void a.default.debug("Received encrypted event before key has been retrieved from the authEndpoint");if(!e.ciphertext||!e.nonce)return void a.default.warn("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+e);var r=u.decodeBase64(e.ciphertext);if(r.length<s.secretbox.overheadLength)return void a.default.warn("Expected encrypted event ciphertext length to be "+s.secretbox.overheadLength+", got: "+r.length);var o=u.decodeBase64(e.nonce);if(o.length<s.secretbox.nonceLength)return void a.default.warn("Expected encrypted event nonce length to be "+s.secretbox.nonceLength+", got: "+o.length);var i=s.secretbox.open(r,o,this.key);if(null===i)return a.default.debug("Failed to decrypted an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),void this.authorize(this.pusher.connection.socket_id,function(e,c){return e?void a.default.warn("Failed to make a request to the authEndpoint: "+c+". Unable to fetch new key, so dropping encrypted event"):null===(i=s.secretbox.open(r,o,n.key))?void a.default.warn("Failed to decrypt event with new key. Dropping encrypted event"):void n.emitJSON(t,u.encodeUTF8(i))});this.emitJSON(t,u.encodeUTF8(i))},e.prototype.emitJSON=function(t,e){try{this.emit(t,JSON.parse(e))}catch(n){this.emit(t,e)}return this},e}(o.default);e.__esModule=!0,e.default=c},function(t,e,n){!function(t){"use strict";function e(t,e,n,r){t[e]=n>>24&255,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n,t[e+4]=r>>24&255,t[e+5]=r>>16&255,t[e+6]=r>>8&255,t[e+7]=255&r}function r(t,e,n,r,o){var i,a=0;for(i=0;i<o;i++)a|=t[e+i]^n[r+i];return(1&a-1>>>8)-1}function o(t,e,n,o){return r(t,e,n,o,16)}function i(t,e,n,o){return r(t,e,n,o,32)}function a(t,e,n,r){for(var o,i=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,u=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,c=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,l=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,f=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,h=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,p=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,d=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,y=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,g=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,v=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,m=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,b=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,_=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,w=i,E=a,S=s,O=u,C=c,T=l,A=f,k=h,P=p,x=d,I=y,M=g,U=v,j=m,R=b,N=_,L=0;L<20;L+=2)o=w+U|0,C^=o<<7|o>>>25,o=C+w|0,P^=o<<9|o>>>23,o=P+C|0,U^=o<<13|o>>>19,o=U+P|0,w^=o<<18|o>>>14,o=T+E|0,x^=o<<7|o>>>25,o=x+T|0,j^=o<<9|o>>>23,o=j+x|0,E^=o<<13|o>>>19,o=E+j|0,T^=o<<18|o>>>14,o=I+A|0,R^=o<<7|o>>>25,o=R+I|0,S^=o<<9|o>>>23,o=S+R|0,A^=o<<13|o>>>19,o=A+S|0,I^=o<<18|o>>>14,o=N+M|0,O^=o<<7|o>>>25,o=O+N|0,k^=o<<9|o>>>23,o=k+O|0,M^=o<<13|o>>>19,o=M+k|0,N^=o<<18|o>>>14,o=w+O|0,E^=o<<7|o>>>25,o=E+w|0,S^=o<<9|o>>>23,o=S+E|0,O^=o<<13|o>>>19,o=O+S|0,w^=o<<18|o>>>14,o=T+C|0,A^=o<<7|o>>>25,o=A+T|0,k^=o<<9|o>>>23,o=k+A|0,C^=o<<13|o>>>19,o=C+k|0,T^=o<<18|o>>>14,o=I+x|0,M^=o<<7|o>>>25,o=M+I|0,P^=o<<9|o>>>23,o=P+M|0,x^=o<<13|o>>>19,o=x+P|0,I^=o<<18|o>>>14,o=N+R|0,U^=o<<7|o>>>25,o=U+N|0,j^=o<<9|o>>>23,o=j+U|0,R^=o<<13|o>>>19,o=R+j|0,N^=o<<18|o>>>14;w=w+i|0,E=E+a|0,S=S+s|0,O=O+u|0,C=C+c|0,T=T+l|0,A=A+f|0,k=k+h|0,P=P+p|0,x=x+d|0,I=I+y|0,M=M+g|0,U=U+v|0,j=j+m|0,R=R+b|0,N=N+_|0,t[0]=w>>>0&255,t[1]=w>>>8&255,t[2]=w>>>16&255,t[3]=w>>>24&255,t[4]=E>>>0&255,t[5]=E>>>8&255,t[6]=E>>>16&255,t[7]=E>>>24&255,t[8]=S>>>0&255,t[9]=S>>>8&255,t[10]=S>>>16&255,t[11]=S>>>24&255,t[12]=O>>>0&255,t[13]=O>>>8&255,t[14]=O>>>16&255,t[15]=O>>>24&255,t[16]=C>>>0&255,t[17]=C>>>8&255,t[18]=C>>>16&255,t[19]=C>>>24&255,t[20]=T>>>0&255,t[21]=T>>>8&255,t[22]=T>>>16&255,t[23]=T>>>24&255,t[24]=A>>>0&255,t[25]=A>>>8&255,t[26]=A>>>16&255,t[27]=A>>>24&255,t[28]=k>>>0&255,t[29]=k>>>8&255,t[30]=k>>>16&255,t[31]=k>>>24&255,t[32]=P>>>0&255,t[33]=P>>>8&255,t[34]=P>>>16&255,t[35]=P>>>24&255,t[36]=x>>>0&255,t[37]=x>>>8&255,t[38]=x>>>16&255,t[39]=x>>>24&255,t[40]=I>>>0&255,t[41]=I>>>8&255,t[42]=I>>>16&255,t[43]=I>>>24&255,t[44]=M>>>0&255,t[45]=M>>>8&255,t[46]=M>>>16&255,t[47]=M>>>24&255,t[48]=U>>>0&255,t[49]=U>>>8&255,t[50]=U>>>16&255,t[51]=U>>>24&255,t[52]=j>>>0&255,t[53]=j>>>8&255,t[54]=j>>>16&255,t[55]=j>>>24&255,t[56]=R>>>0&255,t[57]=R>>>8&255,t[58]=R>>>16&255,t[59]=R>>>24&255,t[60]=N>>>0&255,t[61]=N>>>8&255,t[62]=N>>>16&255,t[63]=N>>>24&255}function s(t,e,n,r){for(var o,i=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,u=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,c=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,l=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,f=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,h=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,p=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,d=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,y=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,g=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,v=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,m=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,b=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,_=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,w=i,E=a,S=s,O=u,C=c,T=l,A=f,k=h,P=p,x=d,I=y,M=g,U=v,j=m,R=b,N=_,L=0;L<20;L+=2)o=w+U|0,C^=o<<7|o>>>25,o=C+w|0,P^=o<<9|o>>>23,o=P+C|0,U^=o<<13|o>>>19,o=U+P|0,w^=o<<18|o>>>14,o=T+E|0,x^=o<<7|o>>>25,o=x+T|0,j^=o<<9|o>>>23,o=j+x|0,E^=o<<13|o>>>19,o=E+j|0,T^=o<<18|o>>>14,o=I+A|0,R^=o<<7|o>>>25,o=R+I|0,S^=o<<9|o>>>23,o=S+R|0,A^=o<<13|o>>>19,o=A+S|0,I^=o<<18|o>>>14,o=N+M|0,O^=o<<7|o>>>25,o=O+N|0,k^=o<<9|o>>>23,o=k+O|0,M^=o<<13|o>>>19,o=M+k|0,N^=o<<18|o>>>14,o=w+O|0,E^=o<<7|o>>>25,o=E+w|0,S^=o<<9|o>>>23,o=S+E|0,O^=o<<13|o>>>19,o=O+S|0,w^=o<<18|o>>>14,o=T+C|0,A^=o<<7|o>>>25,o=A+T|0,k^=o<<9|o>>>23,o=k+A|0,C^=o<<13|o>>>19,o=C+k|0,T^=o<<18|o>>>14,o=I+x|0,M^=o<<7|o>>>25,o=M+I|0,P^=o<<9|o>>>23,o=P+M|0,x^=o<<13|o>>>19,o=x+P|0,I^=o<<18|o>>>14,o=N+R|0,U^=o<<7|o>>>25,o=U+N|0,j^=o<<9|o>>>23,o=j+U|0,R^=o<<13|o>>>19,o=R+j|0,N^=o<<18|o>>>14;t[0]=w>>>0&255,t[1]=w>>>8&255,t[2]=w>>>16&255,t[3]=w>>>24&255,t[4]=T>>>0&255,t[5]=T>>>8&255,t[6]=T>>>16&255,t[7]=T>>>24&255,t[8]=I>>>0&255,t[9]=I>>>8&255,t[10]=I>>>16&255,t[11]=I>>>24&255,t[12]=N>>>0&255,t[13]=N>>>8&255,t[14]=N>>>16&255,t[15]=N>>>24&255,t[16]=A>>>0&255,t[17]=A>>>8&255,t[18]=A>>>16&255,t[19]=A>>>24&255,t[20]=k>>>0&255,t[21]=k>>>8&255,t[22]=k>>>16&255,t[23]=k>>>24&255,t[24]=P>>>0&255,t[25]=P>>>8&255,t[26]=P>>>16&255,t[27]=P>>>24&255,t[28]=x>>>0&255,t[29]=x>>>8&255,t[30]=x>>>16&255,t[31]=x>>>24&255}function u(t,e,n,r){a(t,e,n,r)}function c(t,e,n,r){s(t,e,n,r)}function l(t,e,n,r,o,i,a){var s,c,l=new Uint8Array(16),f=new Uint8Array(64);for(c=0;c<16;c++)l[c]=0;for(c=0;c<8;c++)l[c]=i[c];for(;o>=64;){for(u(f,l,a,ht),c=0;c<64;c++)t[e+c]=n[r+c]^f[c];for(s=1,c=8;c<16;c++)s=s+(255&l[c])|0,l[c]=255&s,s>>>=8;o-=64,e+=64,r+=64}if(o>0)for(u(f,l,a,ht),c=0;c<o;c++)t[e+c]=n[r+c]^f[c];return 0}function f(t,e,n,r,o){var i,a,s=new Uint8Array(16),c=new Uint8Array(64);for(a=0;a<16;a++)s[a]=0;for(a=0;a<8;a++)s[a]=r[a];for(;n>=64;){for(u(c,s,o,ht),a=0;a<64;a++)t[e+a]=c[a];for(i=1,a=8;a<16;a++)i=i+(255&s[a])|0,s[a]=255&i,i>>>=8;n-=64,e+=64}if(n>0)for(u(c,s,o,ht),a=0;a<n;a++)t[e+a]=c[a];return 0}function h(t,e,n,r,o){var i=new Uint8Array(32);c(i,r,o,ht);for(var a=new Uint8Array(8),s=0;s<8;s++)a[s]=r[s+16];return f(t,e,n,a,i)}function p(t,e,n,r,o,i,a){var s=new Uint8Array(32);c(s,i,a,ht);for(var u=new Uint8Array(8),f=0;f<8;f++)u[f]=i[f+16];return l(t,e,n,r,o,u,s)}function d(t,e,n,r,o,i){var a=new pt(i);return a.update(n,r,o),a.finish(t,e),0}function y(t,e,n,r,i,a){var s=new Uint8Array(16);return d(s,0,n,r,i,a),o(t,e,s,0)}function g(t,e,n,r,o){var i;if(n<32)return-1;for(p(t,0,e,0,n,r,o),d(t,16,t,32,n-32,t),i=0;i<16;i++)t[i]=0;return 0}function v(t,e,n,r,o){var i,a=new Uint8Array(32);if(n<32)return-1;if(h(a,0,32,r,o),0!==y(e,16,e,32,n-32,a))return-1;for(p(t,0,e,0,n,r,o),i=0;i<32;i++)t[i]=0;return 0}function m(t,e){var n;for(n=0;n<16;n++)t[n]=0|e[n]}function b(t){var e,n,r=1;for(e=0;e<16;e++)n=t[e]+r+65535,r=Math.floor(n/65536),t[e]=n-65536*r;t[0]+=r-1+37*(r-1)}function _(t,e,n){for(var r,o=~(n-1),i=0;i<16;i++)r=o&(t[i]^e[i]),t[i]^=r,e[i]^=r}function w(t,e){var n,r,o,i=tt(),a=tt();for(n=0;n<16;n++)a[n]=e[n];for(b(a),b(a),b(a),r=0;r<2;r++){for(i[0]=a[0]-65517,n=1;n<15;n++)i[n]=a[n]-65535-(i[n-1]>>16&1),i[n-1]&=65535;i[15]=a[15]-32767-(i[14]>>16&1),o=i[15]>>16&1,i[14]&=65535,_(a,i,1-o)}for(n=0;n<16;n++)t[2*n]=255&a[n],t[2*n+1]=a[n]>>8}function E(t,e){var n=new Uint8Array(32),r=new Uint8Array(32);return w(n,t),w(r,e),i(n,0,r,0)}function S(t){var e=new Uint8Array(32);return w(e,t),1&e[0]}function O(t,e){var n;for(n=0;n<16;n++)t[n]=e[2*n]+(e[2*n+1]<<8);t[15]&=32767}function C(t,e,n){for(var r=0;r<16;r++)t[r]=e[r]+n[r]}function T(t,e,n){for(var r=0;r<16;r++)t[r]=e[r]-n[r]}function A(t,e,n){var r,o,i=0,a=0,s=0,u=0,c=0,l=0,f=0,h=0,p=0,d=0,y=0,g=0,v=0,m=0,b=0,_=0,w=0,E=0,S=0,O=0,C=0,T=0,A=0,k=0,P=0,x=0,I=0,M=0,U=0,j=0,R=0,N=n[0],L=n[1],B=n[2],D=n[3],F=n[4],z=n[5],H=n[6],Y=n[7],q=n[8],V=n[9],G=n[10],W=n[11],J=n[12],K=n[13],X=n[14],Z=n[15];r=e[0],i+=r*N,a+=r*L,s+=r*B,u+=r*D,c+=r*F,l+=r*z,f+=r*H,h+=r*Y,p+=r*q,d+=r*V,y+=r*G,g+=r*W,v+=r*J,m+=r*K,b+=r*X,_+=r*Z,r=e[1],a+=r*N,s+=r*L,u+=r*B,c+=r*D,l+=r*F,f+=r*z,h+=r*H,p+=r*Y,d+=r*q,y+=r*V,g+=r*G,v+=r*W,m+=r*J,b+=r*K,_+=r*X,w+=r*Z,r=e[2],s+=r*N,u+=r*L,c+=r*B,l+=r*D,f+=r*F,h+=r*z,p+=r*H,d+=r*Y,y+=r*q,g+=r*V,v+=r*G,m+=r*W,b+=r*J,_+=r*K,w+=r*X,E+=r*Z,r=e[3],u+=r*N,c+=r*L,l+=r*B,f+=r*D,h+=r*F,p+=r*z,d+=r*H,y+=r*Y,g+=r*q,v+=r*V,m+=r*G,b+=r*W,_+=r*J,w+=r*K,E+=r*X,S+=r*Z,r=e[4],c+=r*N,l+=r*L,f+=r*B,h+=r*D,p+=r*F,d+=r*z,y+=r*H,g+=r*Y,v+=r*q,m+=r*V,b+=r*G,_+=r*W,w+=r*J,E+=r*K,S+=r*X,O+=r*Z,r=e[5],l+=r*N,f+=r*L,h+=r*B,p+=r*D,d+=r*F,y+=r*z,g+=r*H,v+=r*Y,m+=r*q,b+=r*V,_+=r*G,w+=r*W,E+=r*J,S+=r*K,O+=r*X,C+=r*Z,r=e[6],f+=r*N,h+=r*L,p+=r*B,d+=r*D,y+=r*F,g+=r*z,v+=r*H,m+=r*Y,b+=r*q,_+=r*V,w+=r*G,E+=r*W,S+=r*J,O+=r*K,C+=r*X,T+=r*Z,r=e[7],h+=r*N,p+=r*L,d+=r*B,y+=r*D,g+=r*F,v+=r*z,m+=r*H,b+=r*Y,_+=r*q,w+=r*V,E+=r*G,S+=r*W,O+=r*J,C+=r*K,T+=r*X,A+=r*Z,r=e[8],p+=r*N,d+=r*L,y+=r*B,g+=r*D,v+=r*F,m+=r*z,b+=r*H,_+=r*Y,w+=r*q,E+=r*V,S+=r*G,O+=r*W,C+=r*J,T+=r*K,A+=r*X,k+=r*Z,r=e[9],d+=r*N,y+=r*L,g+=r*B,v+=r*D,m+=r*F,b+=r*z,_+=r*H,w+=r*Y,E+=r*q,S+=r*V,O+=r*G,C+=r*W,T+=r*J,A+=r*K,k+=r*X,P+=r*Z,r=e[10],y+=r*N,g+=r*L,v+=r*B,m+=r*D,b+=r*F,_+=r*z,w+=r*H,E+=r*Y,S+=r*q,O+=r*V,C+=r*G,T+=r*W,A+=r*J,k+=r*K,P+=r*X,x+=r*Z,r=e[11],g+=r*N,v+=r*L,m+=r*B,b+=r*D,_+=r*F,w+=r*z,E+=r*H,S+=r*Y,O+=r*q,C+=r*V,T+=r*G,A+=r*W;k+=r*J,P+=r*K,x+=r*X,I+=r*Z,r=e[12],v+=r*N,m+=r*L,b+=r*B,_+=r*D,w+=r*F,E+=r*z,S+=r*H,O+=r*Y,C+=r*q,T+=r*V,A+=r*G,k+=r*W,P+=r*J,x+=r*K,I+=r*X,M+=r*Z,r=e[13],m+=r*N,b+=r*L,_+=r*B,w+=r*D,E+=r*F,S+=r*z,O+=r*H,C+=r*Y,T+=r*q,A+=r*V,k+=r*G,P+=r*W,x+=r*J,I+=r*K,M+=r*X,U+=r*Z,r=e[14],b+=r*N,_+=r*L,w+=r*B,E+=r*D,S+=r*F,O+=r*z,C+=r*H,T+=r*Y,A+=r*q,k+=r*V,P+=r*G,x+=r*W,I+=r*J,M+=r*K,U+=r*X,j+=r*Z,r=e[15],_+=r*N,w+=r*L,E+=r*B,S+=r*D,O+=r*F,C+=r*z,T+=r*H,A+=r*Y,k+=r*q,P+=r*V,x+=r*G,I+=r*W,M+=r*J,U+=r*K,j+=r*X,R+=r*Z,i+=38*w,a+=38*E,s+=38*S,u+=38*O,c+=38*C,l+=38*T,f+=38*A,h+=38*k,p+=38*P,d+=38*x,y+=38*I,g+=38*M,v+=38*U,m+=38*j,b+=38*R,o=1,r=i+o+65535,o=Math.floor(r/65536),i=r-65536*o,r=a+o+65535,o=Math.floor(r/65536),a=r-65536*o,r=s+o+65535,o=Math.floor(r/65536),s=r-65536*o,r=u+o+65535,o=Math.floor(r/65536),u=r-65536*o,r=c+o+65535,o=Math.floor(r/65536),c=r-65536*o,r=l+o+65535,o=Math.floor(r/65536),l=r-65536*o,r=f+o+65535,o=Math.floor(r/65536),f=r-65536*o,r=h+o+65535,o=Math.floor(r/65536),h=r-65536*o,r=p+o+65535,o=Math.floor(r/65536),p=r-65536*o,r=d+o+65535,o=Math.floor(r/65536),d=r-65536*o,r=y+o+65535,o=Math.floor(r/65536),y=r-65536*o,r=g+o+65535,o=Math.floor(r/65536),g=r-65536*o,r=v+o+65535,o=Math.floor(r/65536),v=r-65536*o,r=m+o+65535,o=Math.floor(r/65536),m=r-65536*o,r=b+o+65535,o=Math.floor(r/65536),b=r-65536*o,r=_+o+65535,o=Math.floor(r/65536),_=r-65536*o,i+=o-1+37*(o-1),o=1,r=i+o+65535,o=Math.floor(r/65536),i=r-65536*o,r=a+o+65535,o=Math.floor(r/65536),a=r-65536*o,r=s+o+65535,o=Math.floor(r/65536),s=r-65536*o,r=u+o+65535,o=Math.floor(r/65536),u=r-65536*o,r=c+o+65535,o=Math.floor(r/65536),c=r-65536*o,r=l+o+65535,o=Math.floor(r/65536),l=r-65536*o,r=f+o+65535,o=Math.floor(r/65536),f=r-65536*o,r=h+o+65535,o=Math.floor(r/65536),h=r-65536*o,r=p+o+65535,o=Math.floor(r/65536),p=r-65536*o,r=d+o+65535,o=Math.floor(r/65536),d=r-65536*o,r=y+o+65535,o=Math.floor(r/65536),y=r-65536*o,r=g+o+65535,o=Math.floor(r/65536),g=r-65536*o,r=v+o+65535,o=Math.floor(r/65536),v=r-65536*o,r=m+o+65535,o=Math.floor(r/65536),m=r-65536*o,r=b+o+65535,o=Math.floor(r/65536),b=r-65536*o,r=_+o+65535,o=Math.floor(r/65536),_=r-65536*o,i+=o-1+37*(o-1),t[0]=i,t[1]=a,t[2]=s,t[3]=u,t[4]=c,t[5]=l,t[6]=f,t[7]=h,t[8]=p,t[9]=d,t[10]=y,t[11]=g,t[12]=v;t[13]=m,t[14]=b,t[15]=_}function k(t,e){A(t,e,e)}function P(t,e){var n,r=tt();for(n=0;n<16;n++)r[n]=e[n];for(n=253;n>=0;n--)k(r,r),2!==n&&4!==n&&A(r,r,e);for(n=0;n<16;n++)t[n]=r[n]}function x(t,e){var n,r=tt();for(n=0;n<16;n++)r[n]=e[n];for(n=250;n>=0;n--)k(r,r),1!==n&&A(r,r,e);for(n=0;n<16;n++)t[n]=r[n]}function I(t,e,n){var r,o,i=new Uint8Array(32),a=new Float64Array(80),s=tt(),u=tt(),c=tt(),l=tt(),f=tt(),h=tt();for(o=0;o<31;o++)i[o]=e[o];for(i[31]=127&e[31]|64,i[0]&=248,O(a,n),o=0;o<16;o++)u[o]=a[o],l[o]=s[o]=c[o]=0;for(s[0]=l[0]=1,o=254;o>=0;--o)r=i[o>>>3]>>>(7&o)&1,_(s,u,r),_(c,l,r),C(f,s,c),T(s,s,c),C(c,u,l),T(u,u,l),k(l,f),k(h,s),A(s,c,s),A(c,u,f),C(f,s,c),T(s,s,c),k(u,s),T(c,l,h),A(s,c,at),C(s,s,l),A(c,c,s),A(s,l,h),A(l,u,a),k(u,f),_(s,u,r),_(c,l,r);for(o=0;o<16;o++)a[o+16]=s[o],a[o+32]=c[o],a[o+48]=u[o],a[o+64]=l[o];var p=a.subarray(32),d=a.subarray(16);return P(p,p),A(d,d,p),w(t,d),0}function M(t,e){return I(t,e,rt)}function U(t,e){return et(e,32),M(t,e)}function j(t,e,n){var r=new Uint8Array(32);return I(r,n,e),c(t,nt,r,ht)}function R(t,e,n,r,o,i){var a=new Uint8Array(32);return j(a,o,i),dt(t,e,n,r,a)}function N(t,e,n,r,o,i){var a=new Uint8Array(32);return j(a,o,i),yt(t,e,n,r,a)}function L(t,e,n,r){for(var o,i,a,s,u,c,l,f,h,p,d,y,g,v,m,b,_,w,E,S,O,C,T,A,k,P,x=new Int32Array(16),I=new Int32Array(16),M=t[0],U=t[1],j=t[2],R=t[3],N=t[4],L=t[5],B=t[6],D=t[7],F=e[0],z=e[1],H=e[2],Y=e[3],q=e[4],V=e[5],G=e[6],W=e[7],J=0;r>=128;){for(E=0;E<16;E++)S=8*E+J,x[E]=n[S+0]<<24|n[S+1]<<16|n[S+2]<<8|n[S+3],I[E]=n[S+4]<<24|n[S+5]<<16|n[S+6]<<8|n[S+7];for(E=0;E<80;E++)if(o=M,i=U,a=j,s=R,u=N,c=L,l=B,f=D,h=F,p=z,d=H,y=Y,g=q,v=V,m=G,b=W,O=D,C=W,T=65535&C,A=C>>>16,k=65535&O,P=O>>>16,O=(N>>>14|q<<18)^(N>>>18|q<<14)^(q>>>9|N<<23),C=(q>>>14|N<<18)^(q>>>18|N<<14)^(N>>>9|q<<23),T+=65535&C,A+=C>>>16,k+=65535&O,P+=O>>>16,O=N&L^~N&B,C=q&V^~q&G,T+=65535&C,A+=C>>>16,k+=65535&O,P+=O>>>16,O=gt[2*E],C=gt[2*E+1],T+=65535&C,A+=C>>>16,k+=65535&O,P+=O>>>16,O=x[E%16],C=I[E%16],T+=65535&C,A+=C>>>16,k+=65535&O,P+=O>>>16,A+=T>>>16,k+=A>>>16,P+=k>>>16,_=65535&k|P<<16,w=65535&T|A<<16,O=_,C=w,T=65535&C,A=C>>>16,k=65535&O,P=O>>>16,O=(M>>>28|F<<4)^(F>>>2|M<<30)^(F>>>7|M<<25),C=(F>>>28|M<<4)^(M>>>2|F<<30)^(M>>>7|F<<25),T+=65535&C,A+=C>>>16,k+=65535&O,P+=O>>>16,O=M&U^M&j^U&j,C=F&z^F&H^z&H,T+=65535&C,A+=C>>>16,k+=65535&O,P+=O>>>16,A+=T>>>16,k+=A>>>16,P+=k>>>16,f=65535&k|P<<16,b=65535&T|A<<16,O=s,C=y,T=65535&C,A=C>>>16,k=65535&O,P=O>>>16,O=_,C=w,T+=65535&C,A+=C>>>16,k+=65535&O,P+=O>>>16,A+=T>>>16,k+=A>>>16,P+=k>>>16,s=65535&k|P<<16,y=65535&T|A<<16,U=o,j=i,R=a,N=s,L=u,B=c,D=l,M=f,z=h,H=p,Y=d,q=y,V=g,G=v,W=m,F=b,E%16===15)for(S=0;S<16;S++)O=x[S],C=I[S],T=65535&C,A=C>>>16,k=65535&O,P=O>>>16,O=x[(S+9)%16],C=I[(S+9)%16],T+=65535&C,A+=C>>>16,k+=65535&O,P+=O>>>16,_=x[(S+1)%16],w=I[(S+1)%16],O=(_>>>1|w<<31)^(_>>>8|w<<24)^_>>>7,C=(w>>>1|_<<31)^(w>>>8|_<<24)^(w>>>7|_<<25),T+=65535&C,A+=C>>>16,k+=65535&O,P+=O>>>16,_=x[(S+14)%16],w=I[(S+14)%16],O=(_>>>19|w<<13)^(w>>>29|_<<3)^_>>>6,C=(w>>>19|_<<13)^(_>>>29|w<<3)^(w>>>6|_<<26),T+=65535&C,A+=C>>>16,k+=65535&O,P+=O>>>16,A+=T>>>16,k+=A>>>16,P+=k>>>16,x[S]=65535&k|P<<16,I[S]=65535&T|A<<16;O=M,C=F,T=65535&C,A=C>>>16,k=65535&O,P=O>>>16,O=t[0],C=e[0],T+=65535&C,A+=C>>>16,k+=65535&O,P+=O>>>16,A+=T>>>16,k+=A>>>16,P+=k>>>16,t[0]=M=65535&k|P<<16,e[0]=F=65535&T|A<<16,O=U,C=z,T=65535&C,A=C>>>16,k=65535&O,P=O>>>16,O=t[1],C=e[1],T+=65535&C,A+=C>>>16,k+=65535&O,P+=O>>>16,A+=T>>>16,k+=A>>>16,P+=k>>>16,t[1]=U=65535&k|P<<16,e[1]=z=65535&T|A<<16,O=j,C=H,T=65535&C,A=C>>>16,k=65535&O,P=O>>>16,O=t[2],C=e[2],T+=65535&C,A+=C>>>16,k+=65535&O,P+=O>>>16,A+=T>>>16,k+=A>>>16,P+=k>>>16,t[2]=j=65535&k|P<<16,e[2]=H=65535&T|A<<16,O=R,C=Y,T=65535&C,A=C>>>16,k=65535&O,P=O>>>16,O=t[3],C=e[3],T+=65535&C,A+=C>>>16,k+=65535&O,P+=O>>>16,A+=T>>>16,k+=A>>>16,P+=k>>>16,t[3]=R=65535&k|P<<16,e[3]=Y=65535&T|A<<16,O=N,C=q,T=65535&C,A=C>>>16,k=65535&O,P=O>>>16,O=t[4],C=e[4],T+=65535&C,A+=C>>>16,k+=65535&O,P+=O>>>16,A+=T>>>16,k+=A>>>16,P+=k>>>16,t[4]=N=65535&k|P<<16,e[4]=q=65535&T|A<<16,O=L,C=V,T=65535&C,A=C>>>16,k=65535&O,P=O>>>16,O=t[5],C=e[5],T+=65535&C,A+=C>>>16,k+=65535&O,P+=O>>>16,A+=T>>>16,k+=A>>>16,P+=k>>>16,t[5]=L=65535&k|P<<16,e[5]=V=65535&T|A<<16,O=B,C=G,T=65535&C,A=C>>>16,k=65535&O,P=O>>>16,O=t[6],C=e[6],T+=65535&C,A+=C>>>16,k+=65535&O,P+=O>>>16,A+=T>>>16,k+=A>>>16,P+=k>>>16,t[6]=B=65535&k|P<<16,e[6]=G=65535&T|A<<16,O=D,C=W,T=65535&C,A=C>>>16,k=65535&O,P=O>>>16,O=t[7],C=e[7],T+=65535&C,A+=C>>>16,k+=65535&O,P+=O>>>16,A+=T>>>16,k+=A>>>16,P+=k>>>16,t[7]=D=65535&k|P<<16,e[7]=W=65535&T|A<<16,J+=128,r-=128}return r}function B(t,n,r){var o,i=new Int32Array(8),a=new Int32Array(8),s=new Uint8Array(256),u=r;for(i[0]=1779033703,i[1]=3144134277,i[2]=1013904242,i[3]=2773480762,i[4]=1359893119,i[5]=2600822924,i[6]=528734635,i[7]=1541459225,a[0]=4089235720,a[1]=2227873595,a[2]=4271175723,a[3]=1595750129,a[4]=2917565137,a[5]=725511199,a[6]=4215389547,a[7]=327033209,L(i,a,n,r),r%=128,o=0;o<r;o++)s[o]=n[u-r+o];for(s[r]=128,r=256-128*(r<112?1:0),s[r-9]=0,e(s,r-8,u/536870912|0,u<<3),L(i,a,s,r),o=0;o<8;o++)e(t,8*o,i[o],a[o]);return 0}function D(t,e){var n=tt(),r=tt(),o=tt(),i=tt(),a=tt(),s=tt(),u=tt(),c=tt(),l=tt();T(n,t[1],t[0]),T(l,e[1],e[0]),A(n,n,l),C(r,t[0],t[1]),C(l,e[0],e[1]),A(r,r,l),A(o,t[3],e[3]),A(o,o,ut),A(i,t[2],e[2]),C(i,i,i),T(a,r,n),T(s,i,o),C(u,i,o),C(c,r,n),A(t[0],a,s),A(t[1],c,u),A(t[2],u,s),A(t[3],a,c)}function F(t,e,n){var r;for(r=0;r<4;r++)_(t[r],e[r],n)}function z(t,e){var n=tt(),r=tt(),o=tt();P(o,e[2]),A(n,e[0],o),A(r,e[1],o),w(t,r),t[31]^=S(n)<<7}function H(t,e,n){var r,o;for(m(t[0],ot),m(t[1],it),m(t[2],it),m(t[3],ot),o=255;o>=0;--o)r=n[o/8|0]>>(7&o)&1,F(t,e,r),D(e,t),D(t,t),F(t,e,r)}function Y(t,e){var n=[tt(),tt(),tt(),tt()];m(n[0],ct),m(n[1],lt),m(n[2],it),A(n[3],ct,lt),H(t,n,e)}function q(t,e,n){var r,o=new Uint8Array(64),i=[tt(),tt(),tt(),tt()];for(n||et(e,32),B(o,e,32),o[0]&=248,o[31]&=127,o[31]|=64,Y(i,o),z(t,i),r=0;r<32;r++)e[r+32]=t[r];return 0}function V(t,e){var n,r,o,i;for(r=63;r>=32;--r){for(n=0,o=r-32,i=r-12;o<i;++o)e[o]+=n-16*e[r]*vt[o-(r-32)],n=e[o]+128>>8,e[o]-=256*n;e[o]+=n,e[r]=0}for(n=0,o=0;o<32;o++)e[o]+=n-(e[31]>>4)*vt[o],n=e[o]>>8,e[o]&=255;for(o=0;o<32;o++)e[o]-=n*vt[o];for(r=0;r<32;r++)e[r+1]+=e[r]>>8,t[r]=255&e[r]}function G(t){var e,n=new Float64Array(64);for(e=0;e<64;e++)n[e]=t[e];for(e=0;e<64;e++)t[e]=0;V(t,n)}function W(t,e,n,r){var o,i,a=new Uint8Array(64),s=new Uint8Array(64),u=new Uint8Array(64),c=new Float64Array(64),l=[tt(),tt(),tt(),tt()];B(a,r,32),a[0]&=248,a[31]&=127,a[31]|=64;var f=n+64;for(o=0;o<n;o++)t[64+o]=e[o];for(o=0;o<32;o++)t[32+o]=a[32+o];for(B(u,t.subarray(32),n+32),G(u),Y(l,u),z(t,l),o=32;o<64;o++)t[o]=r[o];for(B(s,t,n+64),G(s),o=0;o<64;o++)c[o]=0;for(o=0;o<32;o++)c[o]=u[o];for(o=0;o<32;o++)for(i=0;i<32;i++)c[o+i]+=s[o]*a[i];return V(t.subarray(32),c),f}function J(t,e){var n=tt(),r=tt(),o=tt(),i=tt(),a=tt(),s=tt(),u=tt();return m(t[2],it),O(t[1],e),k(o,t[1]),A(i,o,st),T(o,o,t[2]),C(i,t[2],i),k(a,i),k(s,a),A(u,s,a),A(n,u,o),A(n,n,i),x(n,n),A(n,n,o),A(n,n,i),A(n,n,i),A(t[0],n,i),k(r,t[0]),A(r,r,i),E(r,o)&&A(t[0],t[0],ft),k(r,t[0]),A(r,r,i),E(r,o)?-1:(S(t[0])===e[31]>>7&&T(t[0],ot,t[0]),A(t[3],t[0],t[1]),0)}function K(t,e,n,r){var o,a=new Uint8Array(32),s=new Uint8Array(64),u=[tt(),tt(),tt(),tt()],c=[tt(),tt(),tt(),tt()];if(-1,n<64)return-1;if(J(c,r))return-1;for(o=0;o<n;o++)t[o]=e[o];for(o=0;o<32;o++)t[o+32]=r[o];if(B(s,t,n),G(s),H(u,c,s),Y(c,e.subarray(32)),D(u,c),z(a,u),n-=64,i(e,0,a,0)){for(o=0;o<n;o++)t[o]=0;return-1}for(o=0;o<n;o++)t[o]=e[o+64];return n}function X(t,e){if(t.length!==mt)throw new Error("bad key size");if(e.length!==bt)throw new Error("bad nonce size")}function Z(t,e){if(t.length!==_t)throw new Error("bad public key size");if(e.length!==wt)throw new Error("bad secret key size")}function Q(){for(var t=0;t<arguments.length;t++)if(!(arguments[t]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function $(t){for(var e=0;e<t.length;e++)t[e]=0}var tt=function(t){var e,n=new Float64Array(16);if(t)for(e=0;e<t.length;e++)n[e]=t[e];return n},et=function(){throw new Error("no PRNG")},nt=new Uint8Array(16),rt=new Uint8Array(32);rt[0]=9;var ot=tt(),it=tt([1]),at=tt([56129,1]),st=tt([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),ut=tt([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),ct=tt([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),lt=tt([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),ft=tt([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]),ht=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]),pt=function(t){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var e,n,r,o,i,a,s,u;e=255&t[0]|(255&t[1])<<8,this.r[0]=8191&e,n=255&t[2]|(255&t[3])<<8,this.r[1]=8191&(e>>>13|n<<3),r=255&t[4]|(255&t[5])<<8,this.r[2]=7939&(n>>>10|r<<6),o=255&t[6]|(255&t[7])<<8,this.r[3]=8191&(r>>>7|o<<9),i=255&t[8]|(255&t[9])<<8,this.r[4]=255&(o>>>4|i<<12),this.r[5]=i>>>1&8190,a=255&t[10]|(255&t[11])<<8,this.r[6]=8191&(i>>>14|a<<2),s=255&t[12]|(255&t[13])<<8,this.r[7]=8065&(a>>>11|s<<5),u=255&t[14]|(255&t[15])<<8,this.r[8]=8191&(s>>>8|u<<8),this.r[9]=u>>>5&127,this.pad[0]=255&t[16]|(255&t[17])<<8,this.pad[1]=255&t[18]|(255&t[19])<<8,this.pad[2]=255&t[20]|(255&t[21])<<8,this.pad[3]=255&t[22]|(255&t[23])<<8,this.pad[4]=255&t[24]|(255&t[25])<<8,this.pad[5]=255&t[26]|(255&t[27])<<8,this.pad[6]=255&t[28]|(255&t[29])<<8,this.pad[7]=255&t[30]|(255&t[31])<<8};pt.prototype.blocks=function(t,e,n){for(var r,o,i,a,s,u,c,l,f,h,p,d,y,g,v,m,b,_,w,E=this.fin?0:2048,S=this.h[0],O=this.h[1],C=this.h[2],T=this.h[3],A=this.h[4],k=this.h[5],P=this.h[6],x=this.h[7],I=this.h[8],M=this.h[9],U=this.r[0],j=this.r[1],R=this.r[2],N=this.r[3],L=this.r[4],B=this.r[5],D=this.r[6],F=this.r[7],z=this.r[8],H=this.r[9];n>=16;)r=255&t[e+0]|(255&t[e+1])<<8,S+=8191&r,o=255&t[e+2]|(255&t[e+3])<<8,O+=8191&(r>>>13|o<<3),i=255&t[e+4]|(255&t[e+5])<<8,C+=8191&(o>>>10|i<<6),a=255&t[e+6]|(255&t[e+7])<<8,T+=8191&(i>>>7|a<<9),s=255&t[e+8]|(255&t[e+9])<<8,A+=8191&(a>>>4|s<<12),k+=s>>>1&8191,u=255&t[e+10]|(255&t[e+11])<<8,P+=8191&(s>>>14|u<<2),c=255&t[e+12]|(255&t[e+13])<<8,x+=8191&(u>>>11|c<<5),l=255&t[e+14]|(255&t[e+15])<<8,I+=8191&(c>>>8|l<<8),M+=l>>>5|E,f=0,h=f,h+=S*U,h+=O*(5*H),h+=C*(5*z),h+=T*(5*F),h+=A*(5*D),f=h>>>13,h&=8191,h+=k*(5*B),h+=P*(5*L),h+=x*(5*N),h+=I*(5*R),h+=M*(5*j),f+=h>>>13,h&=8191,p=f,p+=S*j,p+=O*U,p+=C*(5*H),p+=T*(5*z),p+=A*(5*F),f=p>>>13,p&=8191,p+=k*(5*D),p+=P*(5*B),p+=x*(5*L),p+=I*(5*N),p+=M*(5*R),f+=p>>>13,p&=8191,d=f,d+=S*R,d+=O*j,d+=C*U,d+=T*(5*H),d+=A*(5*z),f=d>>>13,d&=8191,d+=k*(5*F),d+=P*(5*D),d+=x*(5*B),d+=I*(5*L),d+=M*(5*N),f+=d>>>13,d&=8191,y=f,y+=S*N,y+=O*R,y+=C*j,y+=T*U,y+=A*(5*H),f=y>>>13,y&=8191,y+=k*(5*z),y+=P*(5*F),y+=x*(5*D),y+=I*(5*B),y+=M*(5*L),f+=y>>>13,y&=8191,g=f,g+=S*L,g+=O*N,g+=C*R,g+=T*j,g+=A*U,f=g>>>13,g&=8191,g+=k*(5*H),g+=P*(5*z),g+=x*(5*F),g+=I*(5*D),g+=M*(5*B),f+=g>>>13,g&=8191,v=f,v+=S*B,v+=O*L,v+=C*N,v+=T*R,v+=A*j,f=v>>>13,v&=8191,v+=k*U,v+=P*(5*H),v+=x*(5*z),v+=I*(5*F),v+=M*(5*D),f+=v>>>13,v&=8191,m=f,m+=S*D,m+=O*B,m+=C*L,m+=T*N,m+=A*R,f=m>>>13,m&=8191,m+=k*j,m+=P*U,m+=x*(5*H),m+=I*(5*z),m+=M*(5*F),f+=m>>>13,m&=8191,b=f,b+=S*F,b+=O*D,b+=C*B,b+=T*L,b+=A*N,f=b>>>13,b&=8191,b+=k*R,b+=P*j,b+=x*U,b+=I*(5*H),b+=M*(5*z),f+=b>>>13,b&=8191,_=f,_+=S*z,_+=O*F,_+=C*D,_+=T*B,_+=A*L,f=_>>>13,_&=8191,_+=k*N,_+=P*R,_+=x*j,_+=I*U,_+=M*(5*H),f+=_>>>13,_&=8191,w=f,w+=S*H,w+=O*z,w+=C*F,w+=T*D,w+=A*B,f=w>>>13,w&=8191,w+=k*L,w+=P*N,w+=x*R,w+=I*j,w+=M*U,f+=w>>>13,w&=8191,f=(f<<2)+f|0,f=f+h|0,h=8191&f,f>>>=13,p+=f,S=h,O=p,C=d,T=y,A=g,k=v,P=m,x=b,I=_,M=w,e+=16,n-=16;this.h[0]=S,this.h[1]=O,this.h[2]=C,this.h[3]=T,this.h[4]=A,this.h[5]=k,this.h[6]=P,this.h[7]=x,this.h[8]=I,this.h[9]=M},pt.prototype.finish=function(t,e){var n,r,o,i,a=new Uint16Array(10);if(this.leftover){for(i=this.leftover,this.buffer[i++]=1;i<16;i++)this.buffer[i]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(n=this.h[1]>>>13,this.h[1]&=8191,i=2;i<10;i++)this.h[i]+=n,n=this.h[i]>>>13,this.h[i]&=8191;for(this.h[0]+=5*n,n=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=n,n=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=n,a[0]=this.h[0]+5,n=a[0]>>>13,a[0]&=8191,i=1;i<10;i++)a[i]=this.h[i]+n,n=a[i]>>>13,a[i]&=8191;for(a[9]-=8192,r=(1^n)-1,i=0;i<10;i++)a[i]&=r;for(r=~r,i=0;i<10;i++)this.h[i]=this.h[i]&r|a[i];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),o=this.h[0]+this.pad[0],this.h[0]=65535&o,i=1;i<8;i++)o=(this.h[i]+this.pad[i]|0)+(o>>>16)|0,this.h[i]=65535&o;t[e+0]=this.h[0]>>>0&255,t[e+1]=this.h[0]>>>8&255,t[e+2]=this.h[1]>>>0&255,t[e+3]=this.h[1]>>>8&255,t[e+4]=this.h[2]>>>0&255,t[e+5]=this.h[2]>>>8&255,t[e+6]=this.h[3]>>>0&255,t[e+7]=this.h[3]>>>8&255,t[e+8]=this.h[4]>>>0&255,t[e+9]=this.h[4]>>>8&255,t[e+10]=this.h[5]>>>0&255,t[e+11]=this.h[5]>>>8&255,t[e+12]=this.h[6]>>>0&255,t[e+13]=this.h[6]>>>8&255,t[e+14]=this.h[7]>>>0&255,t[e+15]=this.h[7]>>>8&255},pt.prototype.update=function(t,e,n){var r,o;if(this.leftover){for(o=16-this.leftover,o>n&&(o=n),r=0;r<o;r++)this.buffer[this.leftover+r]=t[e+r];if(n-=o,e+=o,this.leftover+=o,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(n>=16&&(o=n-n%16,this.blocks(t,e,o),e+=o,n-=o),n){for(r=0;r<n;r++)this.buffer[this.leftover+r]=t[e+r];this.leftover+=n}};var dt=g,yt=v,gt=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],vt=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),mt=32,bt=24,_t=32,wt=32,Et=bt;t.lowlevel={crypto_core_hsalsa20:c,crypto_stream_xor:p,crypto_stream:h,crypto_stream_salsa20_xor:l,crypto_stream_salsa20:f,crypto_onetimeauth:d,crypto_onetimeauth_verify:y,crypto_verify_16:o,crypto_verify_32:i,crypto_secretbox:g,crypto_secretbox_open:v,crypto_scalarmult:I,crypto_scalarmult_base:M,crypto_box_beforenm:j,crypto_box_afternm:dt,crypto_box:R,crypto_box_open:N,crypto_box_keypair:U,crypto_hash:B,crypto_sign:W,crypto_sign_keypair:q,crypto_sign_open:K,crypto_secretbox_KEYBYTES:mt,crypto_secretbox_NONCEBYTES:bt,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:_t,crypto_box_SECRETKEYBYTES:wt,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:Et,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64},t.randomBytes=function(t){var e=new Uint8Array(t);return et(e,t),e},t.secretbox=function(t,e,n){Q(t,e,n),X(n,e);for(var r=new Uint8Array(32+t.length),o=new Uint8Array(r.length),i=0;i<t.length;i++)r[i+32]=t[i];return g(o,r,r.length,e,n),o.subarray(16)},t.secretbox.open=function(t,e,n){Q(t,e,n),X(n,e);for(var r=new Uint8Array(16+t.length),o=new Uint8Array(r.length),i=0;i<t.length;i++)r[i+16]=t[i];return r.length<32?null:0!==v(o,r,r.length,e,n)?null:o.subarray(32)},t.secretbox.keyLength=mt,t.secretbox.nonceLength=bt,t.secretbox.overheadLength=16,t.scalarMult=function(t,e){if(Q(t,e),32!==t.length)throw new Error("bad n size");if(32!==e.length)throw new Error("bad p size");var n=new Uint8Array(32);return I(n,t,e),n},t.scalarMult.base=function(t){if(Q(t),32!==t.length)throw new Error("bad n size");var e=new Uint8Array(32);return M(e,t),e},t.scalarMult.scalarLength=32,t.scalarMult.groupElementLength=32,t.box=function(e,n,r,o){var i=t.box.before(r,o);return t.secretbox(e,n,i)},t.box.before=function(t,e){Q(t,e),Z(t,e);var n=new Uint8Array(32);return j(n,t,e),n},t.box.after=t.secretbox,t.box.open=function(e,n,r,o){var i=t.box.before(r,o);return t.secretbox.open(e,n,i)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var t=new Uint8Array(_t),e=new Uint8Array(wt);return U(t,e),{publicKey:t,secretKey:e}},t.box.keyPair.fromSecretKey=function(t){if(Q(t),t.length!==wt)throw new Error("bad secret key size");var e=new Uint8Array(_t);return M(e,t),{publicKey:e,secretKey:new Uint8Array(t)}},t.box.publicKeyLength=_t,t.box.secretKeyLength=wt,t.box.sharedKeyLength=32,t.box.nonceLength=Et,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(t,e){if(Q(t,e),64!==e.length)throw new Error("bad secret key size");var n=new Uint8Array(64+t.length);return W(n,t,t.length,e),n},t.sign.open=function(t,e){if(Q(t,e),32!==e.length)throw new Error("bad public key size");var n=new Uint8Array(t.length),r=K(n,t,t.length,e);if(r<0)return null;for(var o=new Uint8Array(r),i=0;i<o.length;i++)o[i]=n[i];return o},t.sign.detached=function(e,n){for(var r=t.sign(e,n),o=new Uint8Array(64),i=0;i<o.length;i++)o[i]=r[i];return o},t.sign.detached.verify=function(t,e,n){if(Q(t,e,n),64!==e.length)throw new Error("bad signature size");if(32!==n.length)throw new Error("bad public key size");var r,o=new Uint8Array(64+t.length),i=new Uint8Array(64+t.length);for(r=0;r<64;r++)o[r]=e[r];for(r=0;r<t.length;r++)o[r+64]=t[r];return K(i,o,o.length,n)>=0},t.sign.keyPair=function(){var t=new Uint8Array(32),e=new Uint8Array(64);return q(t,e),{publicKey:t,secretKey:e}},t.sign.keyPair.fromSecretKey=function(t){if(Q(t),64!==t.length)throw new Error("bad secret key size");for(var e=new Uint8Array(32),n=0;n<e.length;n++)e[n]=t[32+n];return{publicKey:e,secretKey:new Uint8Array(t)}},t.sign.keyPair.fromSeed=function(t){if(Q(t),32!==t.length)throw new Error("bad seed size");for(var e=new Uint8Array(32),n=new Uint8Array(64),r=0;r<32;r++)n[r]=t[r];return q(e,n,!0),{publicKey:e,secretKey:n}},t.sign.publicKeyLength=32,t.sign.secretKeyLength=64,t.sign.seedLength=32,t.sign.signatureLength=64,t.hash=function(t){Q(t);var e=new Uint8Array(64);return B(e,t,t.length),e},t.hash.hashLength=64,t.verify=function(t,e){return Q(t,e),0!==t.length&&0!==e.length&&(t.length===e.length&&0===r(t,0,e,0,t.length))},t.setPRNG=function(t){et=t},function(){var e="undefined"!==typeof self?self.crypto||self.msCrypto:null;if(e&&e.getRandomValues){t.setPRNG(function(t,n){var r,o=new Uint8Array(n);for(r=0;r<n;r+=65536)e.getRandomValues(o.subarray(r,r+Math.min(n-r,65536)));for(r=0;r<n;r++)t[r]=o[r];$(o)})}else(e=n(48))&&e.randomBytes&&t.setPRNG(function(t,n){var r,o=e.randomBytes(n);for(r=0;r<n;r++)t[r]=o[r];$(o)})}()}("undefined"!==typeof t&&t.exports?t.exports:self.nacl=self.nacl||{})},function(t,e){},function(t,e,n){(function(e){!function(e,n){"use strict";"undefined"!==typeof t&&t.exports?t.exports=n():e.nacl?e.nacl.util=n():(e.nacl={},e.nacl.util=n())}(this,function(){"use strict";function t(t){if(!/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(t))throw new TypeError("invalid encoding")}var n={};return n.decodeUTF8=function(t){if("string"!==typeof t)throw new TypeError("expected string");var e,n=unescape(encodeURIComponent(t)),r=new Uint8Array(n.length);for(e=0;e<n.length;e++)r[e]=n.charCodeAt(e);return r},n.encodeUTF8=function(t){var e,n=[];for(e=0;e<t.length;e++)n.push(String.fromCharCode(t[e]));return decodeURIComponent(escape(n.join("")))},"undefined"===typeof atob?"undefined"!==typeof e.from?(n.encodeBase64=function(t){return e.from(t).toString("base64")},n.decodeBase64=function(n){return t(n),new Uint8Array(Array.prototype.slice.call(e.from(n,"base64"),0))}):(n.encodeBase64=function(t){return new e(t).toString("base64")},n.decodeBase64=function(n){return t(n),new Uint8Array(Array.prototype.slice.call(new e(n,"base64"),0))}):(n.encodeBase64=function(t){var e,n=[],r=t.length;for(e=0;e<r;e++)n.push(String.fromCharCode(t[e]));return btoa(n.join(""))},n.decodeBase64=function(e){t(e);var n,r=atob(e),o=new Uint8Array(r.length);for(n=0;n<r.length;n++)o[n]=r.charCodeAt(n);return o}),n})}).call(e,n(50).Buffer)},function(t,e,n){"use strict";function r(){return i.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return i.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=i.prototype):(null===t&&(t=new i(e)),t.length=e),t}function i(t,e,n){if(!i.TYPED_ARRAY_SUPPORT&&!(this instanceof i))return new i(t,e,n);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return a(this,t,e,n)}function a(t,e,n,r){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?h(t,e,n,r):"string"===typeof e?l(t,e,n):p(t,e)}function s(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e,n,r){return s(e),e<=0?o(t,e):void 0!==n?"string"===typeof r?o(t,e).fill(n,r):o(t,e).fill(n):o(t,e)}function c(t,e){if(s(e),t=o(t,e<0?0:0|d(e)),!i.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function l(t,e,n){if("string"===typeof n&&""!==n||(n="utf8"),!i.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|g(e,n);t=o(t,r);var a=t.write(e,n);return a!==r&&(t=t.slice(0,a)),t}function f(t,e){var n=e.length<0?0:0|d(e.length);t=o(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function h(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),i.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=i.prototype):t=f(t,e),t}function p(t,e){if(i.isBuffer(e)){var n=0|d(e.length);return t=o(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||K(e.length)?o(t,0):f(t,e);if("Buffer"===e.type&&Q(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function y(t){return+t!=t&&(t=0),i.alloc(+t)}function g(t,e){if(i.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(t).length;default:if(r)return q(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return M(this,e,n);case"utf8":case"utf-8":return k(this,e,n);case"ascii":return x(this,e,n);case"latin1":case"binary":return I(this,e,n);case"base64":return A(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function b(t,e,n,r,o){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"===typeof e&&(e=i.from(e,r)),i.isBuffer(e))return 0===e.length?-1:_(t,e,n,r,o);if("number"===typeof e)return e&=255,i.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):_(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function _(t,e,n,r,o){function i(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}var c;if(o){var l=-1;for(c=n;c<s;c++)if(i(t,c)===i(e,-1===l?0:c-l)){if(-1===l&&(l=c),c-l+1===u)return l*a}else-1!==l&&(c-=c-l),l=-1}else for(n+u>s&&(n=s-u),c=n;c>=0;c--){for(var f=!0,h=0;h<u;h++)if(i(t,c+h)!==i(e,h)){f=!1;break}if(f)return c}return-1}function w(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=e.length;if(i%2!==0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function E(t,e,n,r){return J(q(e,t.length-n),t,n,r)}function S(t,e,n,r){return J(V(e),t,n,r)}function O(t,e,n,r){return S(t,e,n,r)}function C(t,e,n,r){return J(W(e),t,n,r)}function T(t,e,n,r){return J(G(e,t.length-n),t,n,r)}function A(t,e,n){return 0===e&&n===t.length?X.fromByteArray(t):X.fromByteArray(t.slice(e,n))}function k(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i=t[o],a=null,s=i>239?4:i>223?3:i>191?2:1;if(o+s<=n){var u,c,l,f;switch(s){case 1:i<128&&(a=i);break;case 2:u=t[o+1],128===(192&u)&&(f=(31&i)<<6|63&u)>127&&(a=f);break;case 3:u=t[o+1],c=t[o+2],128===(192&u)&&128===(192&c)&&(f=(15&i)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:u=t[o+1],c=t[o+2],l=t[o+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(f=(15&i)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),o+=s}return P(r)}function P(t){var e=t.length;if(e<=$)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=$));return n}function x(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function I(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function M(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=Y(t[i]);return o}function U(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function j(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,r,o,a){if(!i.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function N(t,e,n,r){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);o<i;++o)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function L(t,e,n,r){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);o<i;++o)t[n+o]=e>>>8*(r?o:3-o)&255}function B(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(t,e,n,r,o){return o||B(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),Z.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,o){return o||B(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),Z.write(t,e,n,r,52,8),n+8}function z(t){if(t=H(t).replace(tt,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function H(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Y(t){return t<16?"0"+t.toString(16):t.toString(16)}function q(t,e){e=e||1/0;for(var n,r=t.length,o=null,i=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function V(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function G(t,e){for(var n,r,o,i=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function W(t){return X.toByteArray(z(t))}function J(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}function K(t){return t!==t}var X=n(51),Z=n(52),Q=n(53);e.Buffer=i,e.SlowBuffer=y,e.INSPECT_MAX_BYTES=50,i.TYPED_ARRAY_SUPPORT=void 0!==self.TYPED_ARRAY_SUPPORT?self.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=r(),i.poolSize=8192,i._augment=function(t){return t.__proto__=i.prototype,t},i.from=function(t,e,n){return a(null,t,e,n)},i.TYPED_ARRAY_SUPPORT&&(i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0})),i.alloc=function(t,e,n){return u(null,t,e,n)},i.allocUnsafe=function(t){return c(null,t)},i.allocUnsafeSlow=function(t){return c(null,t)},i.isBuffer=function(t){return!(null==t||!t._isBuffer)},i.compare=function(t,e){if(!i.isBuffer(t)||!i.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,a=Math.min(n,r);o<a;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},i.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(t,e){if(!Q(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return i.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=i.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!i.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},i.byteLength=g,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},i.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},i.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},i.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?k(this,0,t):v.apply(this,arguments)},i.prototype.equals=function(t){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===i.compare(this,t)},i.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},i.prototype.compare=function(t,e,n,r,o){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,o>>>=0,this===t)return 0;for(var a=o-r,s=n-e,u=Math.min(a,s),c=this.slice(r,o),l=t.slice(e,n),f=0;f<u;++f)if(c[f]!==l[f]){a=c[f],s=l[f];break}return a<s?-1:s<a?1:0},i.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},i.prototype.indexOf=function(t,e,n){return b(this,t,e,n,!0)},i.prototype.lastIndexOf=function(t,e,n){return b(this,t,e,n,!1)},i.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return E(this,t,e,n);case"ascii":return S(this,t,e,n);case"latin1":case"binary":return O(this,t,e,n);case"base64":return C(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;i.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r;if(i.TYPED_ARRAY_SUPPORT)r=this.subarray(t,e),r.__proto__=i.prototype;else{var o=e-t;r=new i(o,void 0);for(var a=0;a<o;++a)r[a]=this[a+t]}return r},i.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},i.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},i.prototype.readUInt8=function(t,e){return e||j(t,1,this.length),this[t]},i.prototype.readUInt16LE=function(t,e){return e||j(t,2,this.length),this[t]|this[t+1]<<8},i.prototype.readUInt16BE=function(t,e){return e||j(t,2,this.length),this[t]<<8|this[t+1]},i.prototype.readUInt32LE=function(t,e){return e||j(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},i.prototype.readUInt32BE=function(t,e){return e||j(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},i.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},i.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},i.prototype.readInt8=function(t,e){return e||j(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},i.prototype.readInt16LE=function(t,e){e||j(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt16BE=function(t,e){e||j(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt32LE=function(t,e){return e||j(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},i.prototype.readInt32BE=function(t,e){return e||j(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},i.prototype.readFloatLE=function(t,e){return e||j(t,4,this.length),Z.read(this,t,!0,23,4)},i.prototype.readFloatBE=function(t,e){return e||j(t,4,this.length),Z.read(this,t,!1,23,4)},i.prototype.readDoubleLE=function(t,e){return e||j(t,8,this.length),Z.read(this,t,!0,52,8)},i.prototype.readDoubleBE=function(t,e){return e||j(t,8,this.length),Z.read(this,t,!1,52,8)},i.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){R(this,t,e,n,Math.pow(2,8*n)-1,0)}var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},i.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){R(this,t,e,n,Math.pow(2,8*n)-1,0)}var o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},i.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,255,0),i.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},i.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},i.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},i.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},i.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},i.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);R(this,t,e,n,o-1,-o)}var i=0,a=1,s=0;for(this[e]=255&t;++i<n&&(a*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+n},i.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);R(this,t,e,n,o-1,-o)}var i=n-1,a=1,s=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+n},i.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,127,-128),i.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},i.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},i.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},i.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),i.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},i.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},i.prototype.writeFloatLE=function(t,e,n){return D(this,t,e,!0,n)},i.prototype.writeFloatBE=function(t,e,n){return D(this,t,e,!1,n)},i.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},i.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},i.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o,a=r-n;if(this===t&&n<e&&e<r)for(o=a-1;o>=0;--o)t[o+e]=this[o+n];else if(a<1e3||!i.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},i.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!i.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var a;if("number"===typeof t)for(a=e;a<n;++a)this[a]=t;else{var s=i.isBuffer(t)?t:q(new i(t,r).toString()),u=s.length;for(a=0;a<n-e;++a)this[a+e]=s[a%u]}return this};var tt=/[^+\/0-9A-Za-z-_]/g},function(t,e){"use strict";function n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function r(t){var e=n(t),r=e[0],o=e[1];return 3*(r+o)/4-o}function o(t,e,n){return 3*(e+n)/4-n}function i(t){for(var e,r=n(t),i=r[0],a=r[1],s=new f(o(t,i,a)),u=0,c=a>0?i-4:i,h=0;h<c;h+=4)e=l[t.charCodeAt(h)]<<18|l[t.charCodeAt(h+1)]<<12|l[t.charCodeAt(h+2)]<<6|l[t.charCodeAt(h+3)],s[u++]=e>>16&255,s[u++]=e>>8&255,s[u++]=255&e;return 2===a&&(e=l[t.charCodeAt(h)]<<2|l[t.charCodeAt(h+1)]>>4,s[u++]=255&e),1===a&&(e=l[t.charCodeAt(h)]<<10|l[t.charCodeAt(h+1)]<<4|l[t.charCodeAt(h+2)]>>2,s[u++]=e>>8&255,s[u++]=255&e),s}function a(t){return c[t>>18&63]+c[t>>12&63]+c[t>>6&63]+c[63&t]}function s(t,e,n){for(var r,o=[],i=e;i<n;i+=3)r=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(255&t[i+2]),o.push(a(r));return o.join("")}function u(t){for(var e,n=t.length,r=n%3,o=[],i=0,a=n-r;i<a;i+=16383)o.push(s(t,i,i+16383>a?a:i+16383));return 1===r?(e=t[n-1],o.push(c[e>>2]+c[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],o.push(c[e>>10]+c[e>>4&63]+c[e<<2&63]+"=")),o.join("")}e.byteLength=r,e.toByteArray=i,e.fromByteArray=u;for(var c=[],l=[],f="undefined"!==typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,d=h.length;p<d;++p)c[p]=h[p],l[h.charCodeAt(p)]=p;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,o){var i,a,s=8*o-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?o-1:0,h=n?-1:1,p=t[e+f];for(f+=h,i=p&(1<<-l)-1,p>>=-l,l+=s;l>0;i=256*i+t[e+f],f+=h,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===i)i=1-c;else{if(i===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),i-=c}return(p?-1:1)*a*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var a,s,u,c=8*i-o-1,l=(1<<c)-1,f=l>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+f>=1?h/u:h*Math.pow(2,1-f),e*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,o),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;t[n+p]=255&s,p+=d,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;t[n+p]=255&a,p+=d,a/=256,c-=8);t[n+p-d]|=128*y}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(14),i=n(7),a=n(16),s=n(4),u=n(2),c=function(t){function e(e,n){var r=this;t.call(this),this.key=e,this.options=n||{},this.state="initialized",this.connection=null,this.usingTLS=!!n.useTLS,this.timeline=this.options.timeline,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var o=u.default.getNetwork();o.bind("online",function(){r.timeline.info({netinfo:"online"}),"connecting"!==r.state&&"unavailable"!==r.state||r.retryIn(0)}),o.bind("offline",function(){r.timeline.info({netinfo:"offline"}),r.connection&&r.sendActivityCheck()}),this.updateStrategy()}return r(e,t),e.prototype.connect=function(){if(!this.connection&&!this.runner){if(!this.strategy.isSupported())return void this.updateState("failed");this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}},e.prototype.send=function(t){return!!this.connection&&this.connection.send(t)},e.prototype.send_event=function(t,e,n){return!!this.connection&&this.connection.send_event(t,e,n)},e.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},e.prototype.isUsingTLS=function(){return this.usingTLS},e.prototype.startConnecting=function(){var t=this,e=function(n,r){n?t.runner=t.strategy.connect(0,e):"error"===r.action?(t.emit("error",{type:"HandshakeError",error:r.error}),t.timeline.error({handshakeError:r.error})):(t.abortConnecting(),t.handshakeCallbacks[r.action](r))};this.runner=this.strategy.connect(0,e)},e.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},e.prototype.disconnectInternally=function(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){this.abandonConnection().close()}},e.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},e.prototype.retryIn=function(t){var e=this;this.timeline.info({action:"retry",delay:t}),t>0&&this.emit("connecting_in",Math.round(t/1e3)),this.retryTimer=new i.OneOffTimer(t||0,function(){e.disconnectInternally(),e.connect()})},e.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},e.prototype.setUnavailableTimer=function(){var t=this;this.unavailableTimer=new i.OneOffTimer(this.options.unavailableTimeout,function(){t.updateState("unavailable")})},e.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},e.prototype.sendActivityCheck=function(){var t=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new i.OneOffTimer(this.options.pongTimeout,function(){t.timeline.error({pong_timed_out:t.options.pongTimeout}),t.retryIn(0)})},e.prototype.resetActivityCheck=function(){var t=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new i.OneOffTimer(this.activityTimeout,function(){t.sendActivityCheck()}))},e.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},e.prototype.buildConnectionCallbacks=function(t){var e=this;return s.extend({},t,{message:function(t){e.resetActivityCheck(),e.emit("message",t)},ping:function(){e.send_event("pusher:pong",{})},activity:function(){e.resetActivityCheck()},error:function(t){e.emit("error",{type:"WebSocketError",error:t})},closed:function(){e.abandonConnection(),e.shouldRetry()&&e.retryIn(1e3)}})},e.prototype.buildHandshakeCallbacks=function(t){var e=this;return s.extend({},t,{connected:function(t){e.activityTimeout=Math.min(e.options.activityTimeout,t.activityTimeout,t.connection.activityTimeout||1/0),e.clearUnavailableTimer(),e.setConnection(t.connection),e.socket_id=e.connection.id,e.updateState("connected",{socket_id:e.socket_id})}})},e.prototype.buildErrorCallbacks=function(){var t=this,e=function(e){return function(n){n.error&&t.emit("error",{type:"WebSocketError",error:n.error}),e(n)}};return{tls_only:e(function(){t.usingTLS=!0,t.updateStrategy(),t.retryIn(0)}),refused:e(function(){t.disconnect()}),backoff:e(function(){t.retryIn(1e3)}),retry:e(function(){t.retryIn(0)})}},e.prototype.setConnection=function(t){this.connection=t;for(var e in this.connectionCallbacks)this.connection.bind(e,this.connectionCallbacks[e]);this.resetActivityCheck()},e.prototype.abandonConnection=function(){if(this.connection){this.stopActivityCheck();for(var t in this.connectionCallbacks)this.connection.unbind(t,this.connectionCallbacks[t]);var e=this.connection;return this.connection=null,e}},e.prototype.updateState=function(t,e){var n=this.state;if(this.state=t,n!==t){var r=t;"connected"===r&&(r+=" with new socket ID "+e.socket_id),a.default.debug("State changed",n+" -> "+r),this.timeline.info({state:t,params:e}),this.emit("state_change",{previous:n,current:t}),this.emit(t,e)}},e.prototype.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},e}(o.default);e.__esModule=!0,e.default=c},function(t,e,n){"use strict";function r(t,e){if(0===t.indexOf("private-encrypted-")){if("ReactNative"==navigator.product){throw new a.UnsupportedFeature("Encrypted channels are not yet supported when using React Native builds.")}return i.default.createEncryptedChannel(t,e)}return 0===t.indexOf("private-")?i.default.createPrivateChannel(t,e):0===t.indexOf("presence-")?i.default.createPresenceChannel(t,e):i.default.createChannel(t,e)}var o=n(4),i=n(33),a=n(43),s=function(){function t(){this.channels={}}return t.prototype.add=function(t,e){return this.channels[t]||(this.channels[t]=r(t,e)),this.channels[t]},t.prototype.all=function(){return o.values(this.channels)},t.prototype.find=function(t){return this.channels[t]},t.prototype.remove=function(t){var e=this.channels[t];return delete this.channels[t],e},t.prototype.disconnect=function(){o.objectApply(this.channels,function(t){t.disconnect()})},t}();e.__esModule=!0,e.default=s},function(t,e,n){"use strict";function r(t,e){return i.default.defer(function(){e(t)}),{abort:function(){},forceMinPriority:function(){}}}var o=n(33),i=n(6),a=n(43),s=n(4),u=function(){function t(t,e,n,r){this.name=t,this.priority=e,this.transport=n,this.options=r||{}}return t.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},t.prototype.connect=function(t,e){var n=this;if(!this.isSupported())return r(new a.UnsupportedStrategy,e);if(this.priority<t)return r(new a.TransportPriorityTooLow,e);var i=!1,u=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),c=null,l=function(){u.unbind("initialized",l),u.connect()},f=function(){c=o.default.createHandshake(u,function(t){i=!0,d(),e(null,t)})},h=function(t){d(),e(t)},p=function(){d();var t;t=s.safeJSONStringify(u),e(new a.TransportClosed(t))},d=function(){u.unbind("initialized",l),u.unbind("open",f),u.unbind("error",h),u.unbind("closed",p)};return u.bind("initialized",l),u.bind("open",f),u.bind("error",h),u.bind("closed",p),u.initialize(),{abort:function(){i||(d(),c?c.close():u.close())},forceMinPriority:function(t){i||n.priority<t&&(c?c.close():u.close())}}},t}();e.__esModule=!0,e.default=u},function(t,e,n){"use strict";var r=n(4),o=n(6),i=n(7),a=function(){function t(t,e){this.strategies=t,this.loop=Boolean(e.loop),this.failFast=Boolean(e.failFast),this.timeout=e.timeout,this.timeoutLimit=e.timeoutLimit}return t.prototype.isSupported=function(){return r.any(this.strategies,o.default.method("isSupported"))},t.prototype.connect=function(t,e){var n=this,r=this.strategies,o=0,i=this.timeout,a=null,s=function(u,c){c?e(null,c):(o+=1,n.loop&&(o%=r.length),o<r.length?(i&&(i*=2,n.timeoutLimit&&(i=Math.min(i,n.timeoutLimit))),a=n.tryStrategy(r[o],t,{timeout:i,failFast:n.failFast},s)):e(!0))};return a=this.tryStrategy(r[o],t,{timeout:i,failFast:this.failFast},s),{abort:function(){a.abort()},forceMinPriority:function(e){t=e,a&&a.forceMinPriority(e)}}},t.prototype.tryStrategy=function(t,e,n,r){var o=null,a=null;return n.timeout>0&&(o=new i.OneOffTimer(n.timeout,function(){a.abort(),r(!0)})),a=t.connect(e,function(t,e){t&&o&&o.isRunning()&&!n.failFast||(o&&o.ensureAborted(),r(t,e))}),{abort:function(){o&&o.ensureAborted(),a.abort()},forceMinPriority:function(t){a.forceMinPriority(t)}}},t}();e.__esModule=!0,e.default=a},function(t,e,n){"use strict";function r(t,e,n){var r=a.map(t,function(t,r,o,i){return t.connect(e,n(r,i))});return{abort:function(){a.apply(r,i)},forceMinPriority:function(t){a.apply(r,function(e){e.forceMinPriority(t)})}}}function o(t){return a.all(t,function(t){return Boolean(t.error)})}function i(t){t.error||t.aborted||(t.abort(),t.aborted=!0)}var a=n(4),s=n(6),u=function(){function t(t){this.strategies=t}return t.prototype.isSupported=function(){return a.any(this.strategies,s.default.method("isSupported"))},t.prototype.connect=function(t,e){return r(this.strategies,t,function(t,n){return function(r,i){if(n[t].error=r,r)return void(o(n)&&e(!0));a.apply(n,function(t){t.forceMinPriority(i.transport.priority)}),e(null,i)}})},t}();e.__esModule=!0,e.default=u},function(t,e,n){"use strict";function r(t){return"pusherTransport"+(t?"TLS":"NonTLS")}function o(t){var e=u.default.getLocalStorage();if(e)try{var n=e[r(t)];if(n)return JSON.parse(n)}catch(e){a(t)}return null}function i(t,e,n){var o=u.default.getLocalStorage();if(o)try{o[r(t)]=l.safeJSONStringify({timestamp:s.default.now(),transport:e,latency:n})}catch(t){}}function a(t){var e=u.default.getLocalStorage();if(e)try{delete e[r(t)]}catch(t){}}var s=n(6),u=n(2),c=n(57),l=n(4),f=function(){function t(t,e,n){this.strategy=t,this.transports=e,this.ttl=n.ttl||18e5,this.usingTLS=n.useTLS,this.timeline=n.timeline}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(t,e){var n=this.usingTLS,r=o(n),u=[this.strategy];if(r&&r.timestamp+this.ttl>=s.default.now()){var l=this.transports[r.transport];l&&(this.timeline.info({cached:!0,transport:r.transport,latency:r.latency}),u.push(new c.default([l],{timeout:2*r.latency+1e3,failFast:!0})))}var f=s.default.now(),h=u.pop().connect(t,function r(o,c){o?(a(n),u.length>0?(f=s.default.now(),h=u.pop().connect(t,r)):e(o)):(i(n,c.transport.name,s.default.now()-f),e(null,c))});return{abort:function(){h.abort()},forceMinPriority:function(e){t=e,h&&h.forceMinPriority(e)}}},t}();e.__esModule=!0,e.default=f},function(t,e,n){"use strict";var r=n(7),o=function(){function t(t,e){var n=e.delay;this.strategy=t,this.options={delay:n}}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(t,e){var n,o=this.strategy,i=new r.OneOffTimer(this.options.delay,function(){n=o.connect(t,e)});return{abort:function(){i.ensureAborted(),n&&n.abort()},forceMinPriority:function(e){t=e,n&&n.forceMinPriority(e)}}},t}();e.__esModule=!0,e.default=o},function(t,e){"use strict";var n=function(){function t(t,e,n){this.test=t,this.trueBranch=e,this.falseBranch=n}return t.prototype.isSupported=function(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()},t.prototype.connect=function(t,e){return(this.test()?this.trueBranch:this.falseBranch).connect(t,e)},t}();e.__esModule=!0,e.default=n},function(t,e){"use strict";var n=function(){function t(t){this.strategy=t}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(t,e){var n=this.strategy.connect(t,function(t,r){r&&n.abort(),e(t,r)});return n},t}();e.__esModule=!0,e.default=n},function(t,e,n){"use strict";var r=n(11);e.getGlobalConfig=function(){return{wsHost:r.default.host,wsPort:r.default.ws_port,wssPort:r.default.wss_port,wsPath:r.default.ws_path,httpHost:r.default.sockjs_host,httpPort:r.default.sockjs_http_port,httpsPort:r.default.sockjs_https_port,httpPath:r.default.sockjs_path,statsHost:r.default.stats_host,authEndpoint:r.default.channel_auth_endpoint,authTransport:r.default.channel_auth_transport,activity_timeout:r.default.activity_timeout,pong_timeout:r.default.pong_timeout,unavailable_timeout:r.default.unavailable_timeout}},e.getClusterConfig=function(t){return{wsHost:"ws-"+t+".pusher.com",httpHost:"sockjs-"+t+".pusher.com"}}}]);e.PusherWorker=n},865:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(866),o=function(t){return t&&t.__esModule?t:{default:t}}(r),i=n(23);e.default=new o.default({clientUrl:window.location.href,endpoint:i.SUMOLOGIC_ENDPOINT,interval:0,returnPromise:!1})},866:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}function i(t){var e=JSON.stringify(t).split("GMT")[1]||"+000";return""+t.toJSON().split(".")[0]+e}Object.defineProperty(e,"__esModule",{value:!0});var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(57),c=function(t){return t&&t.__esModule?t:{default:t}}(u),l=function(){},f=function(){function t(e){if(r(this,t),!e||!Object.prototype.hasOwnProperty.call(e,"endpoint")||void 0===e.endpoint||""===e.endpoint)return void console.error("An endpoint value must be provided");this.config={},this.pendingLogs=[],this.interval=0,this.setConfig(e),this.startLogSending()}return s(t,[{key:"setConfig",value:function(t){this.config={endpoint:t.endpoint,returnPromise:!Object.prototype.hasOwnProperty.call(t,"returnPromise")||t.returnPromise,clientUrl:t.clientUrl||"",useIntervalOnly:t.useIntervalOnly||!1,interval:t.interval||0,batchSize:t.batchSize||0,sourceName:t.sourceName||"",hostName:t.hostName||"",sourceCategory:t.sourceCategory||"",session:t.sessionKey||o(),onSuccess:t.onSuccess||l,onError:t.onError||l,graphite:t.graphite||!1,raw:t.raw||!1}}},{key:"updateConfig",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.endpoint&&(this.config.endpoint=t.endpoint),t.returnPromise&&(this.config.returnPromise=t.returnPromise),t.useIntervalOnly&&(this.config.useIntervalOnly=t.useIntervalOnly),t.interval&&(this.config.interval=t.interval,this.startLogSending()),t.batchSize&&(this.config.batchSize=t.batchSize),t.sourceCategory&&(this.config.sourceCategory=t.sourceCategory)}},{key:"batchReadyToSend",value:function(){if(0===this.config.batchSize)return 0===this.config.interval;var t=this.pendingLogs.reduce(function(t,e){return t+JSON.parse(e).msg+"\n"},""),e=t.length,n=e>=this.config.batchSize;return n&&this.stopLogSending(),n}},{key:"sendLogs",value:function(){var t=this;if(0===this.pendingLogs.length)return!1;try{var e={"X-Sumo-Client":"sumo-javascript-sdk"};if(this.config.graphite?Object.assign(e,{"Content-Type":"application/vnd.sumologic.graphite"}):Object.assign(e,{"Content-Type":"application/json"}),""!==this.config.sourceName&&Object.assign(e,{"X-Sumo-Name":this.config.sourceName}),""!==this.config.sourceCategory&&Object.assign(e,{"X-Sumo-Category":this.config.sourceCategory}),""!==this.config.hostName&&Object.assign(e,{"X-Sumo-Host":this.config.hostName}),this.config.returnPromise&&1===this.pendingLogs.length)return c.default.post(this.config.endpoint,this.pendingLogs.join("\n"),{headers:e});var n=Array.from(this.pendingLogs);return c.default.post(this.config.endpoint,n.join("\n"),{headers:e}).then(function(){t.pendingLogs=t.pendingLogs.slice(n.length),t.startLogSending(),t.config.onSuccess()}).catch(function(e){t.config.onError(e)})}catch(t){return this.config.onError(t),!1}}},{key:"startLogSending",value:function(){var t=this;this.config.interval>0&&(this.interval&&this.stopLogSending(),this.interval=setInterval(function(){t.sendLogs()},this.config.interval))}},{key:"stopLogSending",value:function(){clearInterval(this.interval)}},{key:"emptyLogQueue",value:function(){this.pendingLogs=[]}},{key:"flushLogs",value:function(){return this.sendLogs()}},{key:"log",value:function(t,e){var n=this,r=t;if(!r)return console.error("A value must be provided"),!1;var o=r instanceof Array,s=o?r[0]:r,u="undefined"===typeof s?"undefined":a(s);if("undefined"===u)return console.error("A value must be provided"),!1;if(this.config.graphite&&(!Object.prototype.hasOwnProperty.call(s,"path")||!Object.prototype.hasOwnProperty.call(s,"value")))return console.error('Both "path" and "value" properties must be provided in the message object to send Graphite metrics'),!1;if("object"===u&&0===Object.keys(r).length)return console.error("A non-empty JSON object must be provided"),!1;o||(r=[r]);var c=new Date,l=this.config.session,f={url:this.config.clientUrl};e&&(Object.prototype.hasOwnProperty.call(e,"sessionKey")&&(l=e.sessionKey),Object.prototype.hasOwnProperty.call(e,"timestamp")&&(c=e.timestamp),Object.prototype.hasOwnProperty.call(e,"url")&&(f.url=e.url));var h=i(c),p=r.map(function(t){if(n.config.graphite)return t.path+" "+t.value+" "+Math.round(c.getTime()/1e3);if(n.config.raw)return t;if("string"===typeof t)return JSON.stringify(Object.assign({msg:t,sessionId:l,timestamp:h},f));var e={sessionId:l,timestamp:h};return JSON.stringify(Object.assign(e,f,t))});return this.pendingLogs=this.pendingLogs.concat(p),!this.config.useIntervalOnly&&this.batchReadyToSend()?this.sendLogs():void 0}}]),t}();e.default=f},897:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.publishUserTyping=e.handleClientUserTyping=e.handleCustomerLeftChat=e.handleCustomerInactivity=e.handleAgentEndedChat=e.handleAgentDisconnectedChat=e.handleAgentJoinedChat=e.isAgent=e.getChatId=e.isPrivateChatEnvelopeChannel=void 0;var r=n(27),o=n(17),i=n(48),a=n(40),s=n(39),u=n(278),c=n(898),l=n(7),f=n(98),h=n(153),p=(e.isPrivateChatEnvelopeChannel=function(t){return/private-.+mailbox\.\d+\.chats\.(\w|-)+$/.test(t)},e.getChatId=function(t){var e=t.match(/mailbox\.\d+\.chats\.((\w|-)+)$/);return e?e[1]:void 0},e.isAgent=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).type===u.TYPE_AGENT});e.handleAgentJoinedChat=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=o.push,c=n(),p=c.router,d=p.location,y=(0,r.getChatActiveAgent)(c),g=(0,l.getLabels)(c);y&&y.id===t.id||e((0,i.addChatMessage)({author:{},body:(0,f.t)("chatConnected",h.TRANSLATION_LABELS.chatConnected,g,{name:t.displayName}),type:a.MESSAGE_TYPES.action},{persist:!0})),e((0,i.updateAgent)(t)),d&&d.pathname===s.ASK_CHAT||u(s.ASK_CHAT)}},e.handleAgentDisconnectedChat=function(){return function(t,e){var n=e(),o=(0,r.getChatActiveAgent)(n);if(o){var s=(0,l.getLabels)(n),u=(0,f.t)("chatbotAgentDisconnectedMessage",h.TRANSLATION_LABELS.chatbotAgentDisconnectedMessage,s,{name:o.displayName});t((0,i.addChatMessage)({author:{type:a.AUTHOR_TYPES.system},body:u,type:a.MESSAGE_TYPES.message},{persist:!0})),t((0,i.handleAgentDisconnected)())}}},e.handleAgentEndedChat=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,n){var s=(0,r.getChatActiveAgent)(n()),u=t&&t.action,c=u!==a.CHAT_END_REASONS.WAITING_CUSTOMER&&(0,r.getChatState)(n())!==a.CHAT_STATES.ENDED,p=s&&s.displayName&&u!==a.CHAT_END_REASONS.INACTIVE,d=(0,l.getLabels)(n()),y=p?s.displayName:(0,f.t)("chatbotName",h.TRANSLATION_LABELS.chatbotName,d);c&&e((0,i.addChatMessage)({author:{},body:(0,f.t)("chatEnded",h.TRANSLATION_LABELS.chatEnded,d,{name:y}),type:a.MESSAGE_TYPES.action},{persist:!0})),e((0,i.updateChatData)({state:a.CHAT_STATES.ENDED,chatEndReason:u}));var g=(0,o.getUserEmail)(n()),v=!g;e((0,i.chatEnded)(v))}},e.handleCustomerInactivity=function(){return function(t,e,n){return n.chatBot.emit(a.CHATBOT_EVENTS.USER_INACTIVE)}},e.handleCustomerLeftChat=function(){return function(t,e){var n=e(),s=(0,l.getLabels)(n);t((0,i.addChatMessage)({author:{},body:(0,f.replaceValues)(s.chatEnded,{name:s.you}),type:a.MESSAGE_TYPES.action},{persist:!0}));var u=(0,r.getChatEndReason)(n);t((0,i.updateChatData)({state:a.CHAT_STATES.ENDED,chatEndReason:u||a.CHAT_END_REASONS.ENDED}));var c=(0,o.getUserEmail)(e()),h=!c;t((0,i.chatEnded)(h))}},e.handleClientUserTyping=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){var n=t.isNote,r=t.user;if(!n&&p(r)){var o=setTimeout(function(){return e((0,i.updateIsAgentTyping)({isTyping:!1,agent:r}))},a.TYPING_TIMEOUT);e((0,i.updateIsAgentTyping)({isTyping:!0,timeoutId:o,agent:r}))}}},e.publishUserTyping=function(t,e){return function(n,o){var i=o(),a=(0,r.getChatCustomer)(i),s=(0,r.getPusherChannels)(i)||[],u=s.find(function(t){return t.includes("presence")});u&&(!0===t?e.publish(u,c.CLIENT_USER_TYPING,{user:a}):e.publish(u,c.CLIENT_USER_TYPING_STOP,{user:a}))}}},898:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.AGENT_DISCONNECTED="agent-disconnected",e.EVENT_ADDED="event-added",e.MESSAGE_ADDED="message-added",e.MESSAGE_UPDATED="message-updated",e.CHAT_ENDED="chat-ended",e.CLIENT_AGENT_JOINED_CHAT="client-agent-joined-chat",e.CLIENT_USER_JOINED_CHAT="client-user-joined-chat",e.CLIENT_USER_TYPING="client-user-typing",e.CLIENT_USER_TYPING_STOP="client-user-typing-stopped",e.CUSTOMER_INACTIVE="customer-inactive",e.CUSTOMER_LEFT_CHAT="customer-left-chat",e.CLIENT_BEACON_CLOSED="client-beacon-closed"},899:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=e.ERROR_MESSAGES={INVALID:"File provided is not a valid file.",ABORT:"File read has been aborted.",ERROR:"There was an error reading this file."},i=e.isValidFile=function(t){return t&&"object"===("undefined"===typeof t?"undefined":r(t))&&void 0!==t.type};e.readFile=function(t){return new Promise(function(e,n){i(t)||n(o.INVALID);var r=new FileReader;r.readAsDataURL(t),r.onabort=function(){return n(o.ABORT)},r.onerror=function(){return n(o.ERROR)},r.onloadend=function(){return e(r)}})}}});